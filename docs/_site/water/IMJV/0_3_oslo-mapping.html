<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <script src="/assets/js/vendor/lunr.min.js"></script> <script src="/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <link rel="icon" href="/assets/images/favicon.ico" type="image/x-icon"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>Stap voor stap | OSLO mapping documentatie</title> <meta name="generator" content="Jekyll v3.9.3" /> <meta property="og:title" content="Stap voor stap" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Intro Voor het mappen van de tabulaire view naar een Linked Data graph volgens OSLO wordt gewerkt in 2 stappen. Eerst gebeurt een rudimentaire omzetting naar Linked Data die aansluit bij de oorspronkelijke kolomstructuur. De reden hiervoor is dat we de OSLO mapping via SPARQL Construct queries willen uitdrukken. Dit is een leesbare manier om complexe mappingen te beschrijven, maar vereist Linked Data als input. Daarna gebeurt een SPARQL CONSTRUCT mapping die de intiële omzetting herstructureerd in het implementatiemodel. Om deze stappen beter uit te leggen, gaan we een water-observatie als voorbeeld uitwerken. Voorbeeld bruto vracht observatie water Ruwe data Om bruto vracht observaties te publiceren hebben we maar een deel van de kolommen in de view nodig: { &quot;observation_url&quot; : &quot;https:\/\/data.imjv.omgeving.vlaanderen.be\/id\/observatie\/01894963000131\/AW9308001\/transfer\/chemische_stof\/RYGMFSIKBFXOCR-UHFFFAOYSA-N\/2021&quot;, &quot;observatie_label&quot; : &quot;Observatie Koper 2021&quot;, &quot;year0&quot; : 2021, &quot;emissie_url&quot; : &quot;https:\/\/data.imjv.omgeving.vlaanderen.be\/id\/lozing\/01894963000131\/AW9308001\/2021&quot;, &quot;substantie_url&quot; : &quot;https:\/\/data.omgeving.vlaanderen.be\/id\/concept\/chemische_stof\/RYGMFSIKBFXOCR-UHFFFAOYSA-N&quot;, &quot;substantie_label&quot; : &quot;Koper&quot;, &quot;bepalingsmethode_url&quot; : &quot;https:\/\/data.imjv.omgeving.vlaanderen.be\/id\/concept\/meetgegevens&quot;, &quot;unitMeasure_url&quot; : &quot;https:\/\/data.imjv.omgeving.vlaanderen.be\/id\/concept\/eenheid\/kg_per_jaar&quot;, &quot;unitMeasure_label&quot; : &quot;kg\/jaar&quot;, &quot;modifiedAt&quot; : &quot;2024-06-05T07:14:44.998Z&quot;, &quot;isDeleted&quot; : 0 } Merk op dat kolommen modifiedAt en isDeleted ook gebruikt worden. Deze zijn domeinonafhankelijk en worden gebruikt bij het versioneren van de data. Intermediate mapping Om de intermediate mapping te doen, worden volgende configuratie-velden gebruikt in de VMM-pipeline: ldes_aboutbaseurl: &quot;https://vmm.be/id/imjv/&quot; ldes_aboutcolumnname: &quot;observation_url&quot; ldes_propertybaseurl: &quot;https://vmm.be/ns#&quot; ldes_membertype: &quot;http://www.w3.org/ns/sosa/Observation&quot; ldes_timestamppath: &quot;http://www.w3.org/ns/prov#generatedAtTime&quot; ldes_versionof: &quot;http://purl.org/dc/terms/isVersionOf&quot; aboutbaseurl + waarde van aboutcolumnname worden gebruikt om per record een URI te maken deze URI wordt verder geversioneerd met de huidige timestamp in de pipeline elke kolomwaarde leidt tot een triple met als predikaat propertybaseurl + naam van kolom een rdf:type triple wordt toegevoegd met als object de waarde van membertype een versionOf triple wordt toegevoegd met predikaat op basis van versionof een timestamp triple wordt toegevoegd met predikaat op basis van timestamppath De eerste omzetting leidt tot volgende triples: &lt;https://vmm.be/id/imjv/https%3A%2F%2Fdata.imjv.omgeving.vlaanderen.be%2Fid%2Fobservatie%2F01894963000131%2FAW9308001%2Ftransfer%2Fchemische_stof%2FRYGMFSIKBFXOCR-UHFFFAOYSA-N%2F2021/2024-06-06T07:09:38.716Z&gt; &lt;https://vmm.be/ns#observation_url&gt; &quot;https://data.imjv.omgeving.vlaanderen.be/id/observatie/01894963000131/AW9308001/transfer/chemische_stof/RYGMFSIKBFXOCR-UHFFFAOYSA-N/2021&quot; . &lt;https://vmm.be/id/imjv/https%3A%2F%2Fdata.imjv.omgeving.vlaanderen.be%2Fid%2Fobservatie%2F01894963000131%2FAW9308001%2Ftransfer%2Fchemische_stof%2FRYGMFSIKBFXOCR-UHFFFAOYSA-N%2F2021/2024-06-06T07:09:38.716Z&gt; &lt;https://vmm.be/ns#observatie_label&gt; &quot;Observatie Koper 2021&quot; . &lt;https://vmm.be/id/imjv/https%3A%2F%2Fdata.imjv.omgeving.vlaanderen.be%2Fid%2Fobservatie%2F01894963000131%2FAW9308001%2Ftransfer%2Fchemische_stof%2FRYGMFSIKBFXOCR-UHFFFAOYSA-N%2F2021/2024-06-06T07:09:38.716Z&gt; &lt;https://vmm.be/ns#year0&gt; &quot;2021&quot; . &lt;https://vmm.be/id/imjv/https%3A%2F%2Fdata.imjv.omgeving.vlaanderen.be%2Fid%2Fobservatie%2F01894963000131%2FAW9308001%2Ftransfer%2Fchemische_stof%2FRYGMFSIKBFXOCR-UHFFFAOYSA-N%2F2021/2024-06-06T07:09:38.716Z&gt; &lt;https://vmm.be/ns#emissie_url&gt; &quot;https://data.imjv.omgeving.vlaanderen.be/id/lozing/01894963000131/AW9308001/2021&quot; . &lt;https://vmm.be/id/imjv/https%3A%2F%2Fdata.imjv.omgeving.vlaanderen.be%2Fid%2Fobservatie%2F01894963000131%2FAW9308001%2Ftransfer%2Fchemische_stof%2FRYGMFSIKBFXOCR-UHFFFAOYSA-N%2F2021/2024-06-06T07:09:38.716Z&gt; &lt;https://vmm.be/ns#substantie_url&gt; &quot;https://data.omgeving.vlaanderen.be/id/concept/chemische_stof/RYGMFSIKBFXOCR-UHFFFAOYSA-N&quot; . &lt;https://vmm.be/id/imjv/https%3A%2F%2Fdata.imjv.omgeving.vlaanderen.be%2Fid%2Fobservatie%2F01894963000131%2FAW9308001%2Ftransfer%2Fchemische_stof%2FRYGMFSIKBFXOCR-UHFFFAOYSA-N%2F2021/2024-06-06T07:09:38.716Z&gt; &lt;https://vmm.be/ns#substantie_label&gt; &quot;Koper&quot; . &lt;https://vmm.be/id/imjv/https%3A%2F%2Fdata.imjv.omgeving.vlaanderen.be%2Fid%2Fobservatie%2F01894963000131%2FAW9308001%2Ftransfer%2Fchemische_stof%2FRYGMFSIKBFXOCR-UHFFFAOYSA-N%2F2021/2024-06-06T07:09:38.716Z&gt; &lt;https://vmm.be/ns#bepalingsmethode_url&gt; &quot;https://data.imjv.omgeving.vlaanderen.be/id/concept/meetgegevens&quot; . &lt;https://vmm.be/id/imjv/https%3A%2F%2Fdata.imjv.omgeving.vlaanderen.be%2Fid%2Fobservatie%2F01894963000131%2FAW9308001%2Ftransfer%2Fchemische_stof%2FRYGMFSIKBFXOCR-UHFFFAOYSA-N%2F2021/2024-06-06T07:09:38.716Z&gt; &lt;https://vmm.be/ns#bepalingsmethode_label&gt; &quot;meetgegevens&quot; . &lt;https://vmm.be/id/imjv/https%3A%2F%2Fdata.imjv.omgeving.vlaanderen.be%2Fid%2Fobservatie%2F01894963000131%2FAW9308001%2Ftransfer%2Fchemische_stof%2FRYGMFSIKBFXOCR-UHFFFAOYSA-N%2F2021/2024-06-06T07:09:38.716Z&gt; &lt;https://vmm.be/ns#value0&gt; &quot;1.44642&quot; . &lt;https://vmm.be/id/imjv/https%3A%2F%2Fdata.imjv.omgeving.vlaanderen.be%2Fid%2Fobservatie%2F01894963000131%2FAW9308001%2Ftransfer%2Fchemische_stof%2FRYGMFSIKBFXOCR-UHFFFAOYSA-N%2F2021/2024-06-06T07:09:38.716Z&gt; &lt;https://vmm.be/ns#unitMeasure_url&gt; &quot;https://data.imjv.omgeving.vlaanderen.be/id/concept/eenheid/kg_per_jaar&quot; . &lt;https://vmm.be/id/imjv/https%3A%2F%2Fdata.imjv.omgeving.vlaanderen.be%2Fid%2Fobservatie%2F01894963000131%2FAW9308001%2Ftransfer%2Fchemische_stof%2FRYGMFSIKBFXOCR-UHFFFAOYSA-N%2F2021/2024-06-06T07:09:38.716Z&gt; &lt;https://vmm.be/ns#unitMeasure_label&gt; &quot;kg/jaar&quot; . &lt;https://vmm.be/id/imjv/https%3A%2F%2Fdata.imjv.omgeving.vlaanderen.be%2Fid%2Fobservatie%2F01894963000131%2FAW9308001%2Ftransfer%2Fchemische_stof%2FRYGMFSIKBFXOCR-UHFFFAOYSA-N%2F2021/2024-06-06T07:09:38.716Z&gt; &lt;https://vmm.be/ns#modifiedAt&gt; &quot;2024-06-05T07:14:44.998Z&quot; . &lt;https://vmm.be/id/imjv/https%3A%2F%2Fdata.imjv.omgeving.vlaanderen.be%2Fid%2Fobservatie%2F01894963000131%2FAW9308001%2Ftransfer%2Fchemische_stof%2FRYGMFSIKBFXOCR-UHFFFAOYSA-N%2F2021/2024-06-06T07:09:38.716Z&gt; &lt;#isDeleted&gt; &quot;0&quot; . &lt;https://vmm.be/id/imjv/https%3A%2F%2Fdata.imjv.omgeving.vlaanderen.be%2Fid%2Fobservatie%2F01894963000131%2FAW9308001%2Ftransfer%2Fchemische_stof%2FRYGMFSIKBFXOCR-UHFFFAOYSA-N%2F2021/2024-06-06T07:09:38.716Z&gt; &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#type&gt; &lt;http://www.w3.org/ns/sosa/Observation&gt; . &lt;https://vmm.be/id/imjv/https%3A%2F%2Fdata.imjv.omgeving.vlaanderen.be%2Fid%2Fobservatie%2F01894963000131%2FAW9308001%2Ftransfer%2Fchemische_stof%2FRYGMFSIKBFXOCR-UHFFFAOYSA-N%2F2021/2024-06-06T07:09:38.716Z&gt; &lt;http://www.w3.org/ns/prov#generatedAtTime&gt; &quot;2024-06-06T07:09:38.716Z&quot;^^&lt;http://www.w3.org/2001/XMLSchema#dateTime&gt; . &lt;https://vmm.be/id/imjv/https%3A%2F%2Fdata.imjv.omgeving.vlaanderen.be%2Fid%2Fobservatie%2F01894963000131%2FAW9308001%2Ftransfer%2Fchemische_stof%2FRYGMFSIKBFXOCR-UHFFFAOYSA-N%2F2021/2024-06-06T07:09:38.716Z&gt; &lt;http://purl.org/dc/terms/isVersionOf&gt; &lt;https://vmm.be/id/imjv/https%3A%2F%2Fdata.imjv.omgeving.vlaanderen.be%2Fid%2Fobservatie%2F01894963000131%2FAW9308001%2Ftransfer%2Fchemische_stof%2FRYGMFSIKBFXOCR-UHFFFAOYSA-N%2F2021&gt; . OSLO mapping Op basis van de intermediate omzetting kan vervolgens een OSLO mapping uitwerkt worden adhv SPARQL CONSTRUCT queries. De intermediate omzetting kan lokaal gehost worden via HTTP server om vervolgens met Comunica te transformeren. WHERE Bovenstaande triples worden gebruikt als input in de WHERE-clausule: CONSTRUCT { ... } WHERE { ?obs rdf:type ?type ; prov:generatedAtTime ?gat ; dcterms:isVersionOf ?ivo . ?obs &lt;https://vmm.be/ns#observation_url&gt; ?observation_url . ?obs &lt;https://vmm.be/ns#observatie_label&gt; ?observatie_label . ?obs &lt;https://vmm.be/ns#value0&gt; ?value0 . ?obs &lt;https://vmm.be/ns#year0&gt; ?year0 . ?obs &lt;https://vmm.be/ns#substantie_url&gt; ?substantie_url . ?obs &lt;https://vmm.be/ns#emissie_url&gt; ?emissie_url . ?obs &lt;https://vmm.be/ns#substantie_label&gt; ?substantie_label . ?obs &lt;https://vmm.be/ns#bepalingsmethode_url&gt; ?bepalingsmethode_url . ?obs &lt;https://vmm.be/ns#modifiedAt&gt; ?modifiedAt . OPTIONAL { ?obs &lt;https://vmm.be/ns#unitMeasure_url&gt; ?unitMeasure_url . ?obs &lt;https://vmm.be/ns#unitMeasure_label&gt; ?unitMeasure_label . } } De bovenste drie triple “patterns” werden automatisch toegevoegd zoals hierboven vermeld op basis van configuratie van de pipeline. Deze gebruiken wij niet, omdat we gebruiken maken van de modifiedAt om een versie object te maken. Merk op dat unitMeasure_url en unitMeasure_label op OPTIONAL staan, omdat dit leeg (NULL) kan zijn in de view . Prefix Voor de leesbaarheid worden volgende prefices gebruikt: PREFIX dcterms: &lt;http://purl.org/dc/terms/&gt; PREFIX dc: &lt;http://purl.org/dc/elements/1.1/&gt; PREFIX skos: &lt;http://www.w3.org/2004/02/skos/core#&gt; PREFIX rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt; PREFIX csvw: &lt;http://www.w3.org/ns/csvw#&gt; PREFIX vmm: &lt;https://vmm.be/ns#&gt; PREFIX prov: &lt;http://www.w3.org/ns/prov#&gt; PREFIX rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#&gt; PREFIX sosa: &lt;http://www.w3.org/ns/sosa/&gt; PREFIX ssn: &lt;http://www.w3.org/ns/ssn/&gt; PREFIX xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt; PREFIX time: &lt;http://www.w3.org/2006/time#&gt; PREFIX schema: &lt;https://schema.org/&gt; PREFIX imjv: &lt;https://data.imjv.omgeving.vlaanderen.be/ns/imjv#&gt; PREFIX locn: &lt;http://www.w3.org/ns/locn#&gt; PREFIX geosparql: &lt;http://www.opengis.net/ont/geosparql#&gt; PREFIX wk: &lt;https://data.vlaanderen.be/ns/waterkwaliteit#&gt; CONSTRUCT Versie Nu kunnen we starten met het mappen naar OSLO. Eerst zorgen we ervoor dat de observatie correct geversioneerd en gelabeled is. De ?observation_url kolom wordt als persistente identificator van een observatie gebruikt en dus niet de ?obs die door de pipeline wordt ingevuld. De bedoeling is om de Linked Data zo dicht mogelijk in de bron te houden. Dit houdt in dat de URI’s van resources best worden beschreven in de view adhv _url kolommen en niet in de mapping. Het versioneren wordt hier wel in de mapping gedaan adhv de modifiedAt-waarde om te vermijden dat het aantal _url kolommen verdubbelt. Belangrijk bij het mappen is dat de objecten van triples correct getypeerd worden: datatypes worden verrijkt met STRDT en bijhorende xsd type, instanties van een klasse met URI. CONSTRUCT { # EmissieVrachtAgens observaties voor water ?observation_versie rdf:type ?type ; prov:generatedAtTime ?modifiedAt_with_datatype ; dcterms:isVersionOf ?observation ; rdfs:label ?observatie_vracht_label . ... } WHERE { BIND(STRDT(?modifiedAt, xsd:dateTime) as ?modifiedAt_with_datatype) BIND(URI(?observation_url) as ?observation) BIND(URI(concat(str(?observation_url), &quot;/&quot;, str(?modifiedAt_with_datatype))) as ?observation_versie) BIND(concat(&#39;Geobserveerde vracht &#39;, ?observatie_label) as ?observatie_vracht_label) ... } Resultaat en tijd CONSTRUCT { ... ?observation_versie sosa:phenomenonTime ?observation_versie_fenomeentijd ; sosa:hasResult ?observation_versie_result ; sosa:hasSimpleResult ?vracht_value_with_datatype . ?observation_versie_fenomeentijd a time:Instant ; rdfs:label ?year0 ; time:inXSDgYear ?year_with_datatype . ?observation_versie_result a schema:QuantitativeValue, sosa:Result ; schema:unitCode ?vracht_unitMeasure ; schema:unitText ?unitMeasure_label ; schema:value ?vracht_value_with_datatype ; rdfs:label ?vracht_value_label . ... } WHERE { ... BIND(&#39;https://data.imjv.omgeving.vlaanderen.be/id/.well-known/genid/&#39; as ?skolemBase) BIND(URI(concat(?skolemBase, md5(concat(str(?observation_versie), &quot;/fenomeentijd/0001&quot;)))) as ?observation_versie_fenomeentijd) BIND(URI(concat(?skolemBase, md5(concat(str(?observation_versie), &quot;/result/0001&quot;)))) as ?observation_versie_result) BIND(STRDT(?year0, xsd:gYear) as ?year_with_datatype) BIND(URI(?unitMeasure_url) as ?vracht_unitMeasure) BIND(STRDT(?value0, xsd:decimal) as ?vracht_value_with_datatype) BIND(if(bound(?unitMeasure_label), concat(?value0, &#39; (&#39;, ?unitMeasure_label, &#39;)&#39;), concat(?value0, &#39; (eenheid onbekend)&#39;)) as ?vracht_value_label) ... } Kenmerken CONSTRUCT { ... ?observation_versie sosa:observedProperty ?observed_property_emissievrachtagens . ?observed_property_emissievrachtagens a sosa:ObservableProperty , imjv:EmissieVrachtAgens ; wk:agens ?agens ; rdfs:label ?observed_property_emissievrachtagens_label ; rdfs:comment ?observed_property_emissievrachtagens_comment . ?agens a skos:Concept ; rdfs:label ?substantie_url_with_lang . ... } WHERE { ... BIND(URI(str(?substantie_url)) as ?agens) BIND(STRLANG(?substantie_url, &quot;nl&quot;) as ?substantie_url_with_lang) BIND(URI(concat(?skolemBase, md5(concat(str(?observation_versie), &quot;/kenmerktype/emissievrachtagens/0001&quot;)))) as ?observed_property_emissievrachtagens) BIND(STRLANG(concat(&quot;vracht &quot;, ?substantie_label), &quot;nl&quot;) as ?observed_property_emissievrachtagens_label) BIND(STRLANG(concat(&quot;De vracht &quot;, ?substantie_label, &quot; van een emissie.&quot;), &quot;nl&quot;) as ?observed_property_emissievrachtagens_comment) ... } Geobserveerd Object CONSTRUCT { ... ?observation_versie sosa:hasFeatureOfInterest ?emissie . ... } WHERE { ... BIND(URI(?emissie_url) as ?emissie) ... }" /> <meta property="og:description" content="Intro Voor het mappen van de tabulaire view naar een Linked Data graph volgens OSLO wordt gewerkt in 2 stappen. Eerst gebeurt een rudimentaire omzetting naar Linked Data die aansluit bij de oorspronkelijke kolomstructuur. De reden hiervoor is dat we de OSLO mapping via SPARQL Construct queries willen uitdrukken. Dit is een leesbare manier om complexe mappingen te beschrijven, maar vereist Linked Data als input. Daarna gebeurt een SPARQL CONSTRUCT mapping die de intiële omzetting herstructureerd in het implementatiemodel. Om deze stappen beter uit te leggen, gaan we een water-observatie als voorbeeld uitwerken. Voorbeeld bruto vracht observatie water Ruwe data Om bruto vracht observaties te publiceren hebben we maar een deel van de kolommen in de view nodig: { &quot;observation_url&quot; : &quot;https:\/\/data.imjv.omgeving.vlaanderen.be\/id\/observatie\/01894963000131\/AW9308001\/transfer\/chemische_stof\/RYGMFSIKBFXOCR-UHFFFAOYSA-N\/2021&quot;, &quot;observatie_label&quot; : &quot;Observatie Koper 2021&quot;, &quot;year0&quot; : 2021, &quot;emissie_url&quot; : &quot;https:\/\/data.imjv.omgeving.vlaanderen.be\/id\/lozing\/01894963000131\/AW9308001\/2021&quot;, &quot;substantie_url&quot; : &quot;https:\/\/data.omgeving.vlaanderen.be\/id\/concept\/chemische_stof\/RYGMFSIKBFXOCR-UHFFFAOYSA-N&quot;, &quot;substantie_label&quot; : &quot;Koper&quot;, &quot;bepalingsmethode_url&quot; : &quot;https:\/\/data.imjv.omgeving.vlaanderen.be\/id\/concept\/meetgegevens&quot;, &quot;unitMeasure_url&quot; : &quot;https:\/\/data.imjv.omgeving.vlaanderen.be\/id\/concept\/eenheid\/kg_per_jaar&quot;, &quot;unitMeasure_label&quot; : &quot;kg\/jaar&quot;, &quot;modifiedAt&quot; : &quot;2024-06-05T07:14:44.998Z&quot;, &quot;isDeleted&quot; : 0 } Merk op dat kolommen modifiedAt en isDeleted ook gebruikt worden. Deze zijn domeinonafhankelijk en worden gebruikt bij het versioneren van de data. Intermediate mapping Om de intermediate mapping te doen, worden volgende configuratie-velden gebruikt in de VMM-pipeline: ldes_aboutbaseurl: &quot;https://vmm.be/id/imjv/&quot; ldes_aboutcolumnname: &quot;observation_url&quot; ldes_propertybaseurl: &quot;https://vmm.be/ns#&quot; ldes_membertype: &quot;http://www.w3.org/ns/sosa/Observation&quot; ldes_timestamppath: &quot;http://www.w3.org/ns/prov#generatedAtTime&quot; ldes_versionof: &quot;http://purl.org/dc/terms/isVersionOf&quot; aboutbaseurl + waarde van aboutcolumnname worden gebruikt om per record een URI te maken deze URI wordt verder geversioneerd met de huidige timestamp in de pipeline elke kolomwaarde leidt tot een triple met als predikaat propertybaseurl + naam van kolom een rdf:type triple wordt toegevoegd met als object de waarde van membertype een versionOf triple wordt toegevoegd met predikaat op basis van versionof een timestamp triple wordt toegevoegd met predikaat op basis van timestamppath De eerste omzetting leidt tot volgende triples: &lt;https://vmm.be/id/imjv/https%3A%2F%2Fdata.imjv.omgeving.vlaanderen.be%2Fid%2Fobservatie%2F01894963000131%2FAW9308001%2Ftransfer%2Fchemische_stof%2FRYGMFSIKBFXOCR-UHFFFAOYSA-N%2F2021/2024-06-06T07:09:38.716Z&gt; &lt;https://vmm.be/ns#observation_url&gt; &quot;https://data.imjv.omgeving.vlaanderen.be/id/observatie/01894963000131/AW9308001/transfer/chemische_stof/RYGMFSIKBFXOCR-UHFFFAOYSA-N/2021&quot; . &lt;https://vmm.be/id/imjv/https%3A%2F%2Fdata.imjv.omgeving.vlaanderen.be%2Fid%2Fobservatie%2F01894963000131%2FAW9308001%2Ftransfer%2Fchemische_stof%2FRYGMFSIKBFXOCR-UHFFFAOYSA-N%2F2021/2024-06-06T07:09:38.716Z&gt; &lt;https://vmm.be/ns#observatie_label&gt; &quot;Observatie Koper 2021&quot; . &lt;https://vmm.be/id/imjv/https%3A%2F%2Fdata.imjv.omgeving.vlaanderen.be%2Fid%2Fobservatie%2F01894963000131%2FAW9308001%2Ftransfer%2Fchemische_stof%2FRYGMFSIKBFXOCR-UHFFFAOYSA-N%2F2021/2024-06-06T07:09:38.716Z&gt; &lt;https://vmm.be/ns#year0&gt; &quot;2021&quot; . &lt;https://vmm.be/id/imjv/https%3A%2F%2Fdata.imjv.omgeving.vlaanderen.be%2Fid%2Fobservatie%2F01894963000131%2FAW9308001%2Ftransfer%2Fchemische_stof%2FRYGMFSIKBFXOCR-UHFFFAOYSA-N%2F2021/2024-06-06T07:09:38.716Z&gt; &lt;https://vmm.be/ns#emissie_url&gt; &quot;https://data.imjv.omgeving.vlaanderen.be/id/lozing/01894963000131/AW9308001/2021&quot; . &lt;https://vmm.be/id/imjv/https%3A%2F%2Fdata.imjv.omgeving.vlaanderen.be%2Fid%2Fobservatie%2F01894963000131%2FAW9308001%2Ftransfer%2Fchemische_stof%2FRYGMFSIKBFXOCR-UHFFFAOYSA-N%2F2021/2024-06-06T07:09:38.716Z&gt; &lt;https://vmm.be/ns#substantie_url&gt; &quot;https://data.omgeving.vlaanderen.be/id/concept/chemische_stof/RYGMFSIKBFXOCR-UHFFFAOYSA-N&quot; . &lt;https://vmm.be/id/imjv/https%3A%2F%2Fdata.imjv.omgeving.vlaanderen.be%2Fid%2Fobservatie%2F01894963000131%2FAW9308001%2Ftransfer%2Fchemische_stof%2FRYGMFSIKBFXOCR-UHFFFAOYSA-N%2F2021/2024-06-06T07:09:38.716Z&gt; &lt;https://vmm.be/ns#substantie_label&gt; &quot;Koper&quot; . &lt;https://vmm.be/id/imjv/https%3A%2F%2Fdata.imjv.omgeving.vlaanderen.be%2Fid%2Fobservatie%2F01894963000131%2FAW9308001%2Ftransfer%2Fchemische_stof%2FRYGMFSIKBFXOCR-UHFFFAOYSA-N%2F2021/2024-06-06T07:09:38.716Z&gt; &lt;https://vmm.be/ns#bepalingsmethode_url&gt; &quot;https://data.imjv.omgeving.vlaanderen.be/id/concept/meetgegevens&quot; . &lt;https://vmm.be/id/imjv/https%3A%2F%2Fdata.imjv.omgeving.vlaanderen.be%2Fid%2Fobservatie%2F01894963000131%2FAW9308001%2Ftransfer%2Fchemische_stof%2FRYGMFSIKBFXOCR-UHFFFAOYSA-N%2F2021/2024-06-06T07:09:38.716Z&gt; &lt;https://vmm.be/ns#bepalingsmethode_label&gt; &quot;meetgegevens&quot; . &lt;https://vmm.be/id/imjv/https%3A%2F%2Fdata.imjv.omgeving.vlaanderen.be%2Fid%2Fobservatie%2F01894963000131%2FAW9308001%2Ftransfer%2Fchemische_stof%2FRYGMFSIKBFXOCR-UHFFFAOYSA-N%2F2021/2024-06-06T07:09:38.716Z&gt; &lt;https://vmm.be/ns#value0&gt; &quot;1.44642&quot; . &lt;https://vmm.be/id/imjv/https%3A%2F%2Fdata.imjv.omgeving.vlaanderen.be%2Fid%2Fobservatie%2F01894963000131%2FAW9308001%2Ftransfer%2Fchemische_stof%2FRYGMFSIKBFXOCR-UHFFFAOYSA-N%2F2021/2024-06-06T07:09:38.716Z&gt; &lt;https://vmm.be/ns#unitMeasure_url&gt; &quot;https://data.imjv.omgeving.vlaanderen.be/id/concept/eenheid/kg_per_jaar&quot; . &lt;https://vmm.be/id/imjv/https%3A%2F%2Fdata.imjv.omgeving.vlaanderen.be%2Fid%2Fobservatie%2F01894963000131%2FAW9308001%2Ftransfer%2Fchemische_stof%2FRYGMFSIKBFXOCR-UHFFFAOYSA-N%2F2021/2024-06-06T07:09:38.716Z&gt; &lt;https://vmm.be/ns#unitMeasure_label&gt; &quot;kg/jaar&quot; . &lt;https://vmm.be/id/imjv/https%3A%2F%2Fdata.imjv.omgeving.vlaanderen.be%2Fid%2Fobservatie%2F01894963000131%2FAW9308001%2Ftransfer%2Fchemische_stof%2FRYGMFSIKBFXOCR-UHFFFAOYSA-N%2F2021/2024-06-06T07:09:38.716Z&gt; &lt;https://vmm.be/ns#modifiedAt&gt; &quot;2024-06-05T07:14:44.998Z&quot; . &lt;https://vmm.be/id/imjv/https%3A%2F%2Fdata.imjv.omgeving.vlaanderen.be%2Fid%2Fobservatie%2F01894963000131%2FAW9308001%2Ftransfer%2Fchemische_stof%2FRYGMFSIKBFXOCR-UHFFFAOYSA-N%2F2021/2024-06-06T07:09:38.716Z&gt; &lt;#isDeleted&gt; &quot;0&quot; . &lt;https://vmm.be/id/imjv/https%3A%2F%2Fdata.imjv.omgeving.vlaanderen.be%2Fid%2Fobservatie%2F01894963000131%2FAW9308001%2Ftransfer%2Fchemische_stof%2FRYGMFSIKBFXOCR-UHFFFAOYSA-N%2F2021/2024-06-06T07:09:38.716Z&gt; &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#type&gt; &lt;http://www.w3.org/ns/sosa/Observation&gt; . &lt;https://vmm.be/id/imjv/https%3A%2F%2Fdata.imjv.omgeving.vlaanderen.be%2Fid%2Fobservatie%2F01894963000131%2FAW9308001%2Ftransfer%2Fchemische_stof%2FRYGMFSIKBFXOCR-UHFFFAOYSA-N%2F2021/2024-06-06T07:09:38.716Z&gt; &lt;http://www.w3.org/ns/prov#generatedAtTime&gt; &quot;2024-06-06T07:09:38.716Z&quot;^^&lt;http://www.w3.org/2001/XMLSchema#dateTime&gt; . &lt;https://vmm.be/id/imjv/https%3A%2F%2Fdata.imjv.omgeving.vlaanderen.be%2Fid%2Fobservatie%2F01894963000131%2FAW9308001%2Ftransfer%2Fchemische_stof%2FRYGMFSIKBFXOCR-UHFFFAOYSA-N%2F2021/2024-06-06T07:09:38.716Z&gt; &lt;http://purl.org/dc/terms/isVersionOf&gt; &lt;https://vmm.be/id/imjv/https%3A%2F%2Fdata.imjv.omgeving.vlaanderen.be%2Fid%2Fobservatie%2F01894963000131%2FAW9308001%2Ftransfer%2Fchemische_stof%2FRYGMFSIKBFXOCR-UHFFFAOYSA-N%2F2021&gt; . OSLO mapping Op basis van de intermediate omzetting kan vervolgens een OSLO mapping uitwerkt worden adhv SPARQL CONSTRUCT queries. De intermediate omzetting kan lokaal gehost worden via HTTP server om vervolgens met Comunica te transformeren. WHERE Bovenstaande triples worden gebruikt als input in de WHERE-clausule: CONSTRUCT { ... } WHERE { ?obs rdf:type ?type ; prov:generatedAtTime ?gat ; dcterms:isVersionOf ?ivo . ?obs &lt;https://vmm.be/ns#observation_url&gt; ?observation_url . ?obs &lt;https://vmm.be/ns#observatie_label&gt; ?observatie_label . ?obs &lt;https://vmm.be/ns#value0&gt; ?value0 . ?obs &lt;https://vmm.be/ns#year0&gt; ?year0 . ?obs &lt;https://vmm.be/ns#substantie_url&gt; ?substantie_url . ?obs &lt;https://vmm.be/ns#emissie_url&gt; ?emissie_url . ?obs &lt;https://vmm.be/ns#substantie_label&gt; ?substantie_label . ?obs &lt;https://vmm.be/ns#bepalingsmethode_url&gt; ?bepalingsmethode_url . ?obs &lt;https://vmm.be/ns#modifiedAt&gt; ?modifiedAt . OPTIONAL { ?obs &lt;https://vmm.be/ns#unitMeasure_url&gt; ?unitMeasure_url . ?obs &lt;https://vmm.be/ns#unitMeasure_label&gt; ?unitMeasure_label . } } De bovenste drie triple “patterns” werden automatisch toegevoegd zoals hierboven vermeld op basis van configuratie van de pipeline. Deze gebruiken wij niet, omdat we gebruiken maken van de modifiedAt om een versie object te maken. Merk op dat unitMeasure_url en unitMeasure_label op OPTIONAL staan, omdat dit leeg (NULL) kan zijn in de view . Prefix Voor de leesbaarheid worden volgende prefices gebruikt: PREFIX dcterms: &lt;http://purl.org/dc/terms/&gt; PREFIX dc: &lt;http://purl.org/dc/elements/1.1/&gt; PREFIX skos: &lt;http://www.w3.org/2004/02/skos/core#&gt; PREFIX rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt; PREFIX csvw: &lt;http://www.w3.org/ns/csvw#&gt; PREFIX vmm: &lt;https://vmm.be/ns#&gt; PREFIX prov: &lt;http://www.w3.org/ns/prov#&gt; PREFIX rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#&gt; PREFIX sosa: &lt;http://www.w3.org/ns/sosa/&gt; PREFIX ssn: &lt;http://www.w3.org/ns/ssn/&gt; PREFIX xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt; PREFIX time: &lt;http://www.w3.org/2006/time#&gt; PREFIX schema: &lt;https://schema.org/&gt; PREFIX imjv: &lt;https://data.imjv.omgeving.vlaanderen.be/ns/imjv#&gt; PREFIX locn: &lt;http://www.w3.org/ns/locn#&gt; PREFIX geosparql: &lt;http://www.opengis.net/ont/geosparql#&gt; PREFIX wk: &lt;https://data.vlaanderen.be/ns/waterkwaliteit#&gt; CONSTRUCT Versie Nu kunnen we starten met het mappen naar OSLO. Eerst zorgen we ervoor dat de observatie correct geversioneerd en gelabeled is. De ?observation_url kolom wordt als persistente identificator van een observatie gebruikt en dus niet de ?obs die door de pipeline wordt ingevuld. De bedoeling is om de Linked Data zo dicht mogelijk in de bron te houden. Dit houdt in dat de URI’s van resources best worden beschreven in de view adhv _url kolommen en niet in de mapping. Het versioneren wordt hier wel in de mapping gedaan adhv de modifiedAt-waarde om te vermijden dat het aantal _url kolommen verdubbelt. Belangrijk bij het mappen is dat de objecten van triples correct getypeerd worden: datatypes worden verrijkt met STRDT en bijhorende xsd type, instanties van een klasse met URI. CONSTRUCT { # EmissieVrachtAgens observaties voor water ?observation_versie rdf:type ?type ; prov:generatedAtTime ?modifiedAt_with_datatype ; dcterms:isVersionOf ?observation ; rdfs:label ?observatie_vracht_label . ... } WHERE { BIND(STRDT(?modifiedAt, xsd:dateTime) as ?modifiedAt_with_datatype) BIND(URI(?observation_url) as ?observation) BIND(URI(concat(str(?observation_url), &quot;/&quot;, str(?modifiedAt_with_datatype))) as ?observation_versie) BIND(concat(&#39;Geobserveerde vracht &#39;, ?observatie_label) as ?observatie_vracht_label) ... } Resultaat en tijd CONSTRUCT { ... ?observation_versie sosa:phenomenonTime ?observation_versie_fenomeentijd ; sosa:hasResult ?observation_versie_result ; sosa:hasSimpleResult ?vracht_value_with_datatype . ?observation_versie_fenomeentijd a time:Instant ; rdfs:label ?year0 ; time:inXSDgYear ?year_with_datatype . ?observation_versie_result a schema:QuantitativeValue, sosa:Result ; schema:unitCode ?vracht_unitMeasure ; schema:unitText ?unitMeasure_label ; schema:value ?vracht_value_with_datatype ; rdfs:label ?vracht_value_label . ... } WHERE { ... BIND(&#39;https://data.imjv.omgeving.vlaanderen.be/id/.well-known/genid/&#39; as ?skolemBase) BIND(URI(concat(?skolemBase, md5(concat(str(?observation_versie), &quot;/fenomeentijd/0001&quot;)))) as ?observation_versie_fenomeentijd) BIND(URI(concat(?skolemBase, md5(concat(str(?observation_versie), &quot;/result/0001&quot;)))) as ?observation_versie_result) BIND(STRDT(?year0, xsd:gYear) as ?year_with_datatype) BIND(URI(?unitMeasure_url) as ?vracht_unitMeasure) BIND(STRDT(?value0, xsd:decimal) as ?vracht_value_with_datatype) BIND(if(bound(?unitMeasure_label), concat(?value0, &#39; (&#39;, ?unitMeasure_label, &#39;)&#39;), concat(?value0, &#39; (eenheid onbekend)&#39;)) as ?vracht_value_label) ... } Kenmerken CONSTRUCT { ... ?observation_versie sosa:observedProperty ?observed_property_emissievrachtagens . ?observed_property_emissievrachtagens a sosa:ObservableProperty , imjv:EmissieVrachtAgens ; wk:agens ?agens ; rdfs:label ?observed_property_emissievrachtagens_label ; rdfs:comment ?observed_property_emissievrachtagens_comment . ?agens a skos:Concept ; rdfs:label ?substantie_url_with_lang . ... } WHERE { ... BIND(URI(str(?substantie_url)) as ?agens) BIND(STRLANG(?substantie_url, &quot;nl&quot;) as ?substantie_url_with_lang) BIND(URI(concat(?skolemBase, md5(concat(str(?observation_versie), &quot;/kenmerktype/emissievrachtagens/0001&quot;)))) as ?observed_property_emissievrachtagens) BIND(STRLANG(concat(&quot;vracht &quot;, ?substantie_label), &quot;nl&quot;) as ?observed_property_emissievrachtagens_label) BIND(STRLANG(concat(&quot;De vracht &quot;, ?substantie_label, &quot; van een emissie.&quot;), &quot;nl&quot;) as ?observed_property_emissievrachtagens_comment) ... } Geobserveerd Object CONSTRUCT { ... ?observation_versie sosa:hasFeatureOfInterest ?emissie . ... } WHERE { ... BIND(URI(?emissie_url) as ?emissie) ... }" /> <link rel="canonical" href="http://0.0.0.0:4000/water/IMJV/0_3_oslo-mapping" /> <meta property="og:url" content="http://0.0.0.0:4000/water/IMJV/0_3_oslo-mapping" /> <meta property="og:site_name" content="OSLO mapping documentatie" /> <meta property="og:type" content="website" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Stap voor stap" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","description":"Intro Voor het mappen van de tabulaire view naar een Linked Data graph volgens OSLO wordt gewerkt in 2 stappen. Eerst gebeurt een rudimentaire omzetting naar Linked Data die aansluit bij de oorspronkelijke kolomstructuur. De reden hiervoor is dat we de OSLO mapping via SPARQL Construct queries willen uitdrukken. Dit is een leesbare manier om complexe mappingen te beschrijven, maar vereist Linked Data als input. Daarna gebeurt een SPARQL CONSTRUCT mapping die de intiële omzetting herstructureerd in het implementatiemodel. Om deze stappen beter uit te leggen, gaan we een water-observatie als voorbeeld uitwerken. Voorbeeld bruto vracht observatie water Ruwe data Om bruto vracht observaties te publiceren hebben we maar een deel van de kolommen in de view nodig: { &quot;observation_url&quot; : &quot;https:\\/\\/data.imjv.omgeving.vlaanderen.be\\/id\\/observatie\\/01894963000131\\/AW9308001\\/transfer\\/chemische_stof\\/RYGMFSIKBFXOCR-UHFFFAOYSA-N\\/2021&quot;, &quot;observatie_label&quot; : &quot;Observatie Koper 2021&quot;, &quot;year0&quot; : 2021, &quot;emissie_url&quot; : &quot;https:\\/\\/data.imjv.omgeving.vlaanderen.be\\/id\\/lozing\\/01894963000131\\/AW9308001\\/2021&quot;, &quot;substantie_url&quot; : &quot;https:\\/\\/data.omgeving.vlaanderen.be\\/id\\/concept\\/chemische_stof\\/RYGMFSIKBFXOCR-UHFFFAOYSA-N&quot;, &quot;substantie_label&quot; : &quot;Koper&quot;, &quot;bepalingsmethode_url&quot; : &quot;https:\\/\\/data.imjv.omgeving.vlaanderen.be\\/id\\/concept\\/meetgegevens&quot;, &quot;unitMeasure_url&quot; : &quot;https:\\/\\/data.imjv.omgeving.vlaanderen.be\\/id\\/concept\\/eenheid\\/kg_per_jaar&quot;, &quot;unitMeasure_label&quot; : &quot;kg\\/jaar&quot;, &quot;modifiedAt&quot; : &quot;2024-06-05T07:14:44.998Z&quot;, &quot;isDeleted&quot; : 0 } Merk op dat kolommen modifiedAt en isDeleted ook gebruikt worden. Deze zijn domeinonafhankelijk en worden gebruikt bij het versioneren van de data. Intermediate mapping Om de intermediate mapping te doen, worden volgende configuratie-velden gebruikt in de VMM-pipeline: ldes_aboutbaseurl: &quot;https://vmm.be/id/imjv/&quot; ldes_aboutcolumnname: &quot;observation_url&quot; ldes_propertybaseurl: &quot;https://vmm.be/ns#&quot; ldes_membertype: &quot;http://www.w3.org/ns/sosa/Observation&quot; ldes_timestamppath: &quot;http://www.w3.org/ns/prov#generatedAtTime&quot; ldes_versionof: &quot;http://purl.org/dc/terms/isVersionOf&quot; aboutbaseurl + waarde van aboutcolumnname worden gebruikt om per record een URI te maken deze URI wordt verder geversioneerd met de huidige timestamp in de pipeline elke kolomwaarde leidt tot een triple met als predikaat propertybaseurl + naam van kolom een rdf:type triple wordt toegevoegd met als object de waarde van membertype een versionOf triple wordt toegevoegd met predikaat op basis van versionof een timestamp triple wordt toegevoegd met predikaat op basis van timestamppath De eerste omzetting leidt tot volgende triples: &lt;https://vmm.be/id/imjv/https%3A%2F%2Fdata.imjv.omgeving.vlaanderen.be%2Fid%2Fobservatie%2F01894963000131%2FAW9308001%2Ftransfer%2Fchemische_stof%2FRYGMFSIKBFXOCR-UHFFFAOYSA-N%2F2021/2024-06-06T07:09:38.716Z&gt; &lt;https://vmm.be/ns#observation_url&gt; &quot;https://data.imjv.omgeving.vlaanderen.be/id/observatie/01894963000131/AW9308001/transfer/chemische_stof/RYGMFSIKBFXOCR-UHFFFAOYSA-N/2021&quot; . &lt;https://vmm.be/id/imjv/https%3A%2F%2Fdata.imjv.omgeving.vlaanderen.be%2Fid%2Fobservatie%2F01894963000131%2FAW9308001%2Ftransfer%2Fchemische_stof%2FRYGMFSIKBFXOCR-UHFFFAOYSA-N%2F2021/2024-06-06T07:09:38.716Z&gt; &lt;https://vmm.be/ns#observatie_label&gt; &quot;Observatie Koper 2021&quot; . &lt;https://vmm.be/id/imjv/https%3A%2F%2Fdata.imjv.omgeving.vlaanderen.be%2Fid%2Fobservatie%2F01894963000131%2FAW9308001%2Ftransfer%2Fchemische_stof%2FRYGMFSIKBFXOCR-UHFFFAOYSA-N%2F2021/2024-06-06T07:09:38.716Z&gt; &lt;https://vmm.be/ns#year0&gt; &quot;2021&quot; . &lt;https://vmm.be/id/imjv/https%3A%2F%2Fdata.imjv.omgeving.vlaanderen.be%2Fid%2Fobservatie%2F01894963000131%2FAW9308001%2Ftransfer%2Fchemische_stof%2FRYGMFSIKBFXOCR-UHFFFAOYSA-N%2F2021/2024-06-06T07:09:38.716Z&gt; &lt;https://vmm.be/ns#emissie_url&gt; &quot;https://data.imjv.omgeving.vlaanderen.be/id/lozing/01894963000131/AW9308001/2021&quot; . &lt;https://vmm.be/id/imjv/https%3A%2F%2Fdata.imjv.omgeving.vlaanderen.be%2Fid%2Fobservatie%2F01894963000131%2FAW9308001%2Ftransfer%2Fchemische_stof%2FRYGMFSIKBFXOCR-UHFFFAOYSA-N%2F2021/2024-06-06T07:09:38.716Z&gt; &lt;https://vmm.be/ns#substantie_url&gt; &quot;https://data.omgeving.vlaanderen.be/id/concept/chemische_stof/RYGMFSIKBFXOCR-UHFFFAOYSA-N&quot; . &lt;https://vmm.be/id/imjv/https%3A%2F%2Fdata.imjv.omgeving.vlaanderen.be%2Fid%2Fobservatie%2F01894963000131%2FAW9308001%2Ftransfer%2Fchemische_stof%2FRYGMFSIKBFXOCR-UHFFFAOYSA-N%2F2021/2024-06-06T07:09:38.716Z&gt; &lt;https://vmm.be/ns#substantie_label&gt; &quot;Koper&quot; . &lt;https://vmm.be/id/imjv/https%3A%2F%2Fdata.imjv.omgeving.vlaanderen.be%2Fid%2Fobservatie%2F01894963000131%2FAW9308001%2Ftransfer%2Fchemische_stof%2FRYGMFSIKBFXOCR-UHFFFAOYSA-N%2F2021/2024-06-06T07:09:38.716Z&gt; &lt;https://vmm.be/ns#bepalingsmethode_url&gt; &quot;https://data.imjv.omgeving.vlaanderen.be/id/concept/meetgegevens&quot; . &lt;https://vmm.be/id/imjv/https%3A%2F%2Fdata.imjv.omgeving.vlaanderen.be%2Fid%2Fobservatie%2F01894963000131%2FAW9308001%2Ftransfer%2Fchemische_stof%2FRYGMFSIKBFXOCR-UHFFFAOYSA-N%2F2021/2024-06-06T07:09:38.716Z&gt; &lt;https://vmm.be/ns#bepalingsmethode_label&gt; &quot;meetgegevens&quot; . &lt;https://vmm.be/id/imjv/https%3A%2F%2Fdata.imjv.omgeving.vlaanderen.be%2Fid%2Fobservatie%2F01894963000131%2FAW9308001%2Ftransfer%2Fchemische_stof%2FRYGMFSIKBFXOCR-UHFFFAOYSA-N%2F2021/2024-06-06T07:09:38.716Z&gt; &lt;https://vmm.be/ns#value0&gt; &quot;1.44642&quot; . &lt;https://vmm.be/id/imjv/https%3A%2F%2Fdata.imjv.omgeving.vlaanderen.be%2Fid%2Fobservatie%2F01894963000131%2FAW9308001%2Ftransfer%2Fchemische_stof%2FRYGMFSIKBFXOCR-UHFFFAOYSA-N%2F2021/2024-06-06T07:09:38.716Z&gt; &lt;https://vmm.be/ns#unitMeasure_url&gt; &quot;https://data.imjv.omgeving.vlaanderen.be/id/concept/eenheid/kg_per_jaar&quot; . &lt;https://vmm.be/id/imjv/https%3A%2F%2Fdata.imjv.omgeving.vlaanderen.be%2Fid%2Fobservatie%2F01894963000131%2FAW9308001%2Ftransfer%2Fchemische_stof%2FRYGMFSIKBFXOCR-UHFFFAOYSA-N%2F2021/2024-06-06T07:09:38.716Z&gt; &lt;https://vmm.be/ns#unitMeasure_label&gt; &quot;kg/jaar&quot; . &lt;https://vmm.be/id/imjv/https%3A%2F%2Fdata.imjv.omgeving.vlaanderen.be%2Fid%2Fobservatie%2F01894963000131%2FAW9308001%2Ftransfer%2Fchemische_stof%2FRYGMFSIKBFXOCR-UHFFFAOYSA-N%2F2021/2024-06-06T07:09:38.716Z&gt; &lt;https://vmm.be/ns#modifiedAt&gt; &quot;2024-06-05T07:14:44.998Z&quot; . &lt;https://vmm.be/id/imjv/https%3A%2F%2Fdata.imjv.omgeving.vlaanderen.be%2Fid%2Fobservatie%2F01894963000131%2FAW9308001%2Ftransfer%2Fchemische_stof%2FRYGMFSIKBFXOCR-UHFFFAOYSA-N%2F2021/2024-06-06T07:09:38.716Z&gt; &lt;#isDeleted&gt; &quot;0&quot; . &lt;https://vmm.be/id/imjv/https%3A%2F%2Fdata.imjv.omgeving.vlaanderen.be%2Fid%2Fobservatie%2F01894963000131%2FAW9308001%2Ftransfer%2Fchemische_stof%2FRYGMFSIKBFXOCR-UHFFFAOYSA-N%2F2021/2024-06-06T07:09:38.716Z&gt; &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#type&gt; &lt;http://www.w3.org/ns/sosa/Observation&gt; . &lt;https://vmm.be/id/imjv/https%3A%2F%2Fdata.imjv.omgeving.vlaanderen.be%2Fid%2Fobservatie%2F01894963000131%2FAW9308001%2Ftransfer%2Fchemische_stof%2FRYGMFSIKBFXOCR-UHFFFAOYSA-N%2F2021/2024-06-06T07:09:38.716Z&gt; &lt;http://www.w3.org/ns/prov#generatedAtTime&gt; &quot;2024-06-06T07:09:38.716Z&quot;^^&lt;http://www.w3.org/2001/XMLSchema#dateTime&gt; . &lt;https://vmm.be/id/imjv/https%3A%2F%2Fdata.imjv.omgeving.vlaanderen.be%2Fid%2Fobservatie%2F01894963000131%2FAW9308001%2Ftransfer%2Fchemische_stof%2FRYGMFSIKBFXOCR-UHFFFAOYSA-N%2F2021/2024-06-06T07:09:38.716Z&gt; &lt;http://purl.org/dc/terms/isVersionOf&gt; &lt;https://vmm.be/id/imjv/https%3A%2F%2Fdata.imjv.omgeving.vlaanderen.be%2Fid%2Fobservatie%2F01894963000131%2FAW9308001%2Ftransfer%2Fchemische_stof%2FRYGMFSIKBFXOCR-UHFFFAOYSA-N%2F2021&gt; . OSLO mapping Op basis van de intermediate omzetting kan vervolgens een OSLO mapping uitwerkt worden adhv SPARQL CONSTRUCT queries. De intermediate omzetting kan lokaal gehost worden via HTTP server om vervolgens met Comunica te transformeren. WHERE Bovenstaande triples worden gebruikt als input in de WHERE-clausule: CONSTRUCT { ... } WHERE { ?obs rdf:type ?type ; prov:generatedAtTime ?gat ; dcterms:isVersionOf ?ivo . ?obs &lt;https://vmm.be/ns#observation_url&gt; ?observation_url . ?obs &lt;https://vmm.be/ns#observatie_label&gt; ?observatie_label . ?obs &lt;https://vmm.be/ns#value0&gt; ?value0 . ?obs &lt;https://vmm.be/ns#year0&gt; ?year0 . ?obs &lt;https://vmm.be/ns#substantie_url&gt; ?substantie_url . ?obs &lt;https://vmm.be/ns#emissie_url&gt; ?emissie_url . ?obs &lt;https://vmm.be/ns#substantie_label&gt; ?substantie_label . ?obs &lt;https://vmm.be/ns#bepalingsmethode_url&gt; ?bepalingsmethode_url . ?obs &lt;https://vmm.be/ns#modifiedAt&gt; ?modifiedAt . OPTIONAL { ?obs &lt;https://vmm.be/ns#unitMeasure_url&gt; ?unitMeasure_url . ?obs &lt;https://vmm.be/ns#unitMeasure_label&gt; ?unitMeasure_label . } } De bovenste drie triple “patterns” werden automatisch toegevoegd zoals hierboven vermeld op basis van configuratie van de pipeline. Deze gebruiken wij niet, omdat we gebruiken maken van de modifiedAt om een versie object te maken. Merk op dat unitMeasure_url en unitMeasure_label op OPTIONAL staan, omdat dit leeg (NULL) kan zijn in de view . Prefix Voor de leesbaarheid worden volgende prefices gebruikt: PREFIX dcterms: &lt;http://purl.org/dc/terms/&gt; PREFIX dc: &lt;http://purl.org/dc/elements/1.1/&gt; PREFIX skos: &lt;http://www.w3.org/2004/02/skos/core#&gt; PREFIX rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt; PREFIX csvw: &lt;http://www.w3.org/ns/csvw#&gt; PREFIX vmm: &lt;https://vmm.be/ns#&gt; PREFIX prov: &lt;http://www.w3.org/ns/prov#&gt; PREFIX rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#&gt; PREFIX sosa: &lt;http://www.w3.org/ns/sosa/&gt; PREFIX ssn: &lt;http://www.w3.org/ns/ssn/&gt; PREFIX xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt; PREFIX time: &lt;http://www.w3.org/2006/time#&gt; PREFIX schema: &lt;https://schema.org/&gt; PREFIX imjv: &lt;https://data.imjv.omgeving.vlaanderen.be/ns/imjv#&gt; PREFIX locn: &lt;http://www.w3.org/ns/locn#&gt; PREFIX geosparql: &lt;http://www.opengis.net/ont/geosparql#&gt; PREFIX wk: &lt;https://data.vlaanderen.be/ns/waterkwaliteit#&gt; CONSTRUCT Versie Nu kunnen we starten met het mappen naar OSLO. Eerst zorgen we ervoor dat de observatie correct geversioneerd en gelabeled is. De ?observation_url kolom wordt als persistente identificator van een observatie gebruikt en dus niet de ?obs die door de pipeline wordt ingevuld. De bedoeling is om de Linked Data zo dicht mogelijk in de bron te houden. Dit houdt in dat de URI’s van resources best worden beschreven in de view adhv _url kolommen en niet in de mapping. Het versioneren wordt hier wel in de mapping gedaan adhv de modifiedAt-waarde om te vermijden dat het aantal _url kolommen verdubbelt. Belangrijk bij het mappen is dat de objecten van triples correct getypeerd worden: datatypes worden verrijkt met STRDT en bijhorende xsd type, instanties van een klasse met URI. CONSTRUCT { # EmissieVrachtAgens observaties voor water ?observation_versie rdf:type ?type ; prov:generatedAtTime ?modifiedAt_with_datatype ; dcterms:isVersionOf ?observation ; rdfs:label ?observatie_vracht_label . ... } WHERE { BIND(STRDT(?modifiedAt, xsd:dateTime) as ?modifiedAt_with_datatype) BIND(URI(?observation_url) as ?observation) BIND(URI(concat(str(?observation_url), &quot;/&quot;, str(?modifiedAt_with_datatype))) as ?observation_versie) BIND(concat(&#39;Geobserveerde vracht &#39;, ?observatie_label) as ?observatie_vracht_label) ... } Resultaat en tijd CONSTRUCT { ... ?observation_versie sosa:phenomenonTime ?observation_versie_fenomeentijd ; sosa:hasResult ?observation_versie_result ; sosa:hasSimpleResult ?vracht_value_with_datatype . ?observation_versie_fenomeentijd a time:Instant ; rdfs:label ?year0 ; time:inXSDgYear ?year_with_datatype . ?observation_versie_result a schema:QuantitativeValue, sosa:Result ; schema:unitCode ?vracht_unitMeasure ; schema:unitText ?unitMeasure_label ; schema:value ?vracht_value_with_datatype ; rdfs:label ?vracht_value_label . ... } WHERE { ... BIND(&#39;https://data.imjv.omgeving.vlaanderen.be/id/.well-known/genid/&#39; as ?skolemBase) BIND(URI(concat(?skolemBase, md5(concat(str(?observation_versie), &quot;/fenomeentijd/0001&quot;)))) as ?observation_versie_fenomeentijd) BIND(URI(concat(?skolemBase, md5(concat(str(?observation_versie), &quot;/result/0001&quot;)))) as ?observation_versie_result) BIND(STRDT(?year0, xsd:gYear) as ?year_with_datatype) BIND(URI(?unitMeasure_url) as ?vracht_unitMeasure) BIND(STRDT(?value0, xsd:decimal) as ?vracht_value_with_datatype) BIND(if(bound(?unitMeasure_label), concat(?value0, &#39; (&#39;, ?unitMeasure_label, &#39;)&#39;), concat(?value0, &#39; (eenheid onbekend)&#39;)) as ?vracht_value_label) ... } Kenmerken CONSTRUCT { ... ?observation_versie sosa:observedProperty ?observed_property_emissievrachtagens . ?observed_property_emissievrachtagens a sosa:ObservableProperty , imjv:EmissieVrachtAgens ; wk:agens ?agens ; rdfs:label ?observed_property_emissievrachtagens_label ; rdfs:comment ?observed_property_emissievrachtagens_comment . ?agens a skos:Concept ; rdfs:label ?substantie_url_with_lang . ... } WHERE { ... BIND(URI(str(?substantie_url)) as ?agens) BIND(STRLANG(?substantie_url, &quot;nl&quot;) as ?substantie_url_with_lang) BIND(URI(concat(?skolemBase, md5(concat(str(?observation_versie), &quot;/kenmerktype/emissievrachtagens/0001&quot;)))) as ?observed_property_emissievrachtagens) BIND(STRLANG(concat(&quot;vracht &quot;, ?substantie_label), &quot;nl&quot;) as ?observed_property_emissievrachtagens_label) BIND(STRLANG(concat(&quot;De vracht &quot;, ?substantie_label, &quot; van een emissie.&quot;), &quot;nl&quot;) as ?observed_property_emissievrachtagens_comment) ... } Geobserveerd Object CONSTRUCT { ... ?observation_versie sosa:hasFeatureOfInterest ?emissie . ... } WHERE { ... BIND(URI(?emissie_url) as ?emissie) ... }","headline":"Stap voor stap","url":"http://0.0.0.0:4000/water/IMJV/0_3_oslo-mapping"}</script> <!-- End Jekyll SEO tag --> <div class="test-header" data-v-df634f57="" data-v-7a7a37b1=""> <div class="global-header" data-v-df634f57=""><img src="/assets/images/LOGO_Vlaanderen_NIV2.svg" alt="Vlaanderen" data-v-df634f57=""><img class="small-global-header-divider" src="/assets/images/divider_globalheader.svg" alt="divider" data-v-df634f57=""><span class="header-title header-font" data-v-df634f57="">Vlaamse Smart Data Space</span><span class="spacer" data-v-df634f57=""></span> <div id="help-needed" data-v-df634f57=""><span class="header-font" data-v-df634f57="">Hulp nodig</span><a id="help" href="https://www.vlaanderen.be/vlaamse-smart-data-space-portaal/contact"><img class="question-menu-item" src="/assets/images/question-mark.svg" alt="?" data-v-df634f57=""></a></div> </div> <hr class="divider" data-v-df634f57=""> </div> <div class="navbar navbar-fixed-top"> <div class="navbar-inner"> <div class="container-fluid"> <a href="https://informatievlaanderen.github.io/VSDS-Tech-Docs/"> <button type="button" class="btn btn-navbar custom-border" > <span class="nav-icon-bar">Home</span> </button> </a> <a href="https://github.com/Informatievlaanderen/VSDS-Onboarding-Example"> <button type="button" class="btn btn-navbar custom-border" > <span class="nav-icon-bar">Tutorial</span> </button> </a> <a href="https://informatievlaanderen.github.io/VSDS-Linked-Data-Interactions/"> <button type="button" class="btn btn-navbar custom-border" > <span class="nav-icon-bar">Linked Data Interactions</span> </button> </a> <a href="https://informatievlaanderen.github.io/VSDS-LDESServer4J/"> <button type="button" class="btn btn-navbar custom-border" > <span class="nav-icon-bar">LDES server</span> </button> </a> <a href="https://informatievlaanderen.github.io/VSDS-Linked-Data-Interactions/ldio/ldio-inputs/ldio-ldes-client"> <button type="button" class="btn btn-navbar custom-border" > <span class="nav-icon-bar">LDES client</span> </button> </a> <a href="https://www.vlaanderen.be/vlaamse-smart-data-space-portaal/blog"> <button type="button" class="btn btn-navbar custom-border" > <span class="nav-icon-bar">Blog posts</span> </button> </a> <a href="https://informatievlaanderen.github.io/OSLO-mapping/"> <button type="button" class="btn btn-navbar custom-border-activated" > <span class="nav-icon-bar">OSLO mapping</span> </button> </a> </div> </div> </div> <style> #help-needed[data-v-df634f57] { display: flex; align-items: center; gap: 5px; background-image: url(https://informatievlaanderen.github.io/OSLO-mapping/assets/images/hulp_nodig.svg); width: 144px; height: 44px; } .custom-border-activated { background-color: rgb(255, 230, 21); } .custom-border { border: 0.3px solid rgb(0, 200, 171); /* Randkleur */ /* Voeg hier eventueel andere stijlelementen toe */ } .navbar-fixed-top .navbar-inner { margin-top:30px; height: 35px; padding: 0; border-top: 1px solid #d4d4d4; z-index: 1000; position: fixed; right:0px; } @media (min-width: 50rem) .navbar-fixed-top { position: relative !important; width: auto !important; height: 100% !important; padding: 0; transition: none; } .global-header[data-v-df634f57] { display: flex; margin-left: 0px; align-items: center; position: fixed; width: 100%; background-color: white; z-index: 100; } .test-header{ margin-bottom: 20px; overflow:hidden; z-index: 100; } element.style { } .small-global-header-divider[data-v-df634f57] { margin: 0 8px 0 4px; } .header-font { color: #333332; font-family: Flanders Art Sans, sans-serif; font-size: 12px; font-style: normal; font-weight: 500; line-height: normal; letter-spacing: 0.5px; text-transform: uppercase; } .spacer { flex-grow: 1; } .divider { border: 1px solid #8f8f8f66; margin: 0; } #help-needed > span[data-v-df634f57] { margin-left: 25px; } /* title of the site */ #header { height: 80px; } #header hgroup { position: absolute; top: 10px; left: 20px; } #header h1 { margin: 0; font-size: 1.75em; font-weight: bold; } #header h2 { color: #ccc; margin: 0 0 4px 16px; line-height: 0.8; font-size: 1.0em; font-weight: normal; } #header a, #header a:hover, #header a:visited { text-decoration: none; } .navbar .nav > .active > a, .navbar .nav > .active > a:hover, .navbar .nav > .active > a:focus { box-shadow: none; } .navbar .btn-navbar { margin-bottom: 5px; } </style> </head> <body> <a class="skip-to-main" href="#main-content">Skip to main content</a> <svg xmlns="http://www.w3.org/2000/svg" class="d-none"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <!-- Feather. MIT License: https://github.com/feathericons/feather/blob/master/LICENSE --> <symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"> <title id="svg-external-link-title">(external link)</title> <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <!-- Bootstrap Icons. MIT License: https://github.com/twbs/icons/blob/main/LICENSE.md --> <symbol id="svg-copy" viewBox="0 0 16 16"> <title>Copy</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16"> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/> <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/> </svg> </symbol> <symbol id="svg-copied" viewBox="0 0 16 16"> <title>Copied</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard-check-fill" viewBox="0 0 16 16"> <path d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z"/> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1Zm6.854 7.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708Z"/> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header" role="banner"> <a href="/" class="site-title lh-tight"> OSLO mapping documentatie </a> <button id="menu-button" class="site-button btn-reset" aria-label="Toggle menu" aria-pressed="false"> <svg viewBox="0 0 24 24" class="icon" aria-hidden="true"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="/" class="nav-list-link">OSLO mapping</a></li></ul> <div class="nav-category">Water Data Space</div> <ul class="nav-list"><li class="nav-list-item active"><button class="nav-list-expander btn-reset" aria-label="toggle items in IMJV category" aria-pressed="true"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/water/IMJV/index" class="nav-list-link">IMJV</a><ul class="nav-list"><li class="nav-list-item "><a href="/water/IMJV/0_1_input" class="nav-list-link">Input data</a></li><li class="nav-list-item "><a href="/water/IMJV/0_2_data_input" class="nav-list-link">Data voorbeeld</a></li><li class="nav-list-item "><a href="/water/IMJV/0_2_model" class="nav-list-link">Implementatie model</a></li><li class="nav-list-item active"><a href="/water/IMJV/0_3_oslo-mapping" class="nav-list-link active">Stap voor stap</a></li><li class="nav-list-item "><a href="/water/IMJV/0_4_examples_water" class="nav-list-link">Examples water</a></li><li class="nav-list-item "><a href="/water/IMJV/0_5_examples_lucht" class="nav-list-link">Examples lucht</a></li><li class="nav-list-item "><a href="/water/IMJV/0_6_examples_exploitatie" class="nav-list-link">Examples exploitatie</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Internet of Water category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/water/Internet%20of%20Waters/index" class="nav-list-link">Internet of Water</a><ul class="nav-list"></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Overstort category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/water/Overstort/index" class="nav-list-link">Overstort</a><ul class="nav-list"><li class="nav-list-item "><a href="/water/Overstort/0_1_input" class="nav-list-link">Input data</a></li><li class="nav-list-item "><a href="/water/Overstort/0_2_data_input" class="nav-list-link">Data voorbeeld</a></li><li class="nav-list-item "><a href="/water/Overstort/0_2_model" class="nav-list-link">Implementatie model</a></li><li class="nav-list-item "><a href="/water/Overstort/0_3_oslo-mapping" class="nav-list-link">Stap voor stap</a></li><li class="nav-list-item "><a href="/water/Overstort/0_4_examples_overstort" class="nav-list-link">Examples Overstort</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in VMM category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/water/VMM_jaar/index" class="nav-list-link">VMM</a><ul class="nav-list"><li class="nav-list-item "><a href="/water/VMM_jaar/0_1_input" class="nav-list-link">Input data</a></li><li class="nav-list-item "><a href="/water/VMM_jaar/0_2_aanzet" class="nav-list-link">Aanzet</a></li><li class="nav-list-item "><a href="/water/VMM_jaar/0_3_oslo-mapping" class="nav-list-link">Stap voor Stap</a></li><li class="nav-list-item "><a href="/water/VMM_jaar/0_4_model" class="nav-list-link">Model</a></li><li class="nav-list-item "><a href="/water/VMM_jaar/3_oslo_mapping" class="nav-list-link">OSLO mapping (JSON-ld)</a></li><li class="nav-list-item "><a href="/water/VMM_jaar/4_extended_oslo_mapping" class="nav-list-link">Expanded OSLO mapping</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Waterkwaliteit Brugge category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/water/Brugge/index" class="nav-list-link">Waterkwaliteit Brugge</a><ul class="nav-list"><li class="nav-list-item "><a href="/water/Brugge/0_1_input" class="nav-list-link">Input data</a></li><li class="nav-list-item "><a href="/water/Brugge/0_2_data_input" class="nav-list-link">Data voorbeeld</a></li><li class="nav-list-item "><a href="/water/Brugge/0_3_aanzet" class="nav-list-link">Methodologie</a></li><li class="nav-list-item "><a href="/water/Brugge/0_3_oslo-mapping" class="nav-list-link">Stap voor stap</a></li><li class="nav-list-item "><a href="/water/Brugge/3_oslo_mapping" class="nav-list-link">Output json-ld</a></li><li class="nav-list-item "><a href="/water/Brugge/0_4_model" class="nav-list-link">Implementatie model</a></li><li class="nav-list-item "><a href="/water/Brugge/4_extended_oslo_mapping" class="nav-list-link">Expanded output</a></li></ul></li></ul> <div class="nav-category">Mobility Data Space</div> <ul class="nav-list"><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Fietstelpunten category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/mobility/Fietstelpunten/index" class="nav-list-link">Fietstelpunten</a><ul class="nav-list"><li class="nav-list-item "><a href="/mobility/Fietstelpunten/0_1_input" class="nav-list-link">Input data</a></li><li class="nav-list-item "><a href="/mobility/Fietstelpunten/0_2_aanpak" class="nav-list-link">Aanpak</a></li><li class="nav-list-item "><a href="/mobility/Fietstelpunten/0_3_oslo-mapping" class="nav-list-link">Stap voor stap</a></li><li class="nav-list-item "><a href="/mobility/Fietstelpunten/3_oslo_mapping" class="nav-list-link">OSLO mapping</a></li><li class="nav-list-item "><a href="/mobility/Fietstelpunten/5_oslo_mapping%20im" class="nav-list-link">OSLO mapping</a></li><li class="nav-list-item "><a href="/mobility/Fietstelpunten/0_4_model" class="nav-list-link">Implementatie model</a></li><li class="nav-list-item "><a href="/mobility/Fietstelpunten/4_extended_oslo_mapping" class="nav-list-link">expanded OSLO mapping</a></li><li class="nav-list-item "><a href="/mobility/Fietstelpunten/6_extended_oslo_mapping%20im" class="nav-list-link">expanded OSLO mapping</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Geomobility category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/mobility/Geomobility/index" class="nav-list-link">Geomobility</a><ul class="nav-list"><li class="nav-list-item "><a href="/mobility/Geomobility/0_1_input" class="nav-list-link">Input data</a></li><li class="nav-list-item "><a href="/mobility/Geomobility/0_2_aanpak" class="nav-list-link">Aanpak</a></li><li class="nav-list-item "><a href="/mobility/Geomobility/0_4_model" class="nav-list-link">Implementatie model</a></li><li class="nav-list-item "><a href="/mobility/Geomobility/5_oslo_mapping" class="nav-list-link">OSLO mapping (implementatiemodel)</a></li><li class="nav-list-item "><a href="/mobility/Geomobility/6_extended_oslo_mapping" class="nav-list-link">expanded OSLO mapping (implementatiemodel)</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Hoppinpunten category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/mobility/Hoppinpunten/index" class="nav-list-link">Hoppinpunten</a><ul class="nav-list"><li class="nav-list-item "><a href="/mobility/Hoppinpunten/0_1_input" class="nav-list-link">Input data</a></li><li class="nav-list-item "><a href="/mobility/Hoppinpunten/0_2_aanpak" class="nav-list-link">Methodologie</a></li><li class="nav-list-item "><a href="/mobility/Hoppinpunten/0_3_oslo-mapping" class="nav-list-link">Stap voor stap</a></li><li class="nav-list-item "><a href="/mobility/Hoppinpunten/0_4_model" class="nav-list-link">Implementatie model</a></li><li class="nav-list-item "><a href="/mobility/Hoppinpunten/3_oslo_mapping" class="nav-list-link">OSLO mapping</a></li><li class="nav-list-item "><a href="/mobility/Hoppinpunten/4_extended_oslo_mapping" class="nav-list-link">expanded OSLO mapping</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Signco category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/mobility/Signco/index" class="nav-list-link">Signco</a><ul class="nav-list"><li class="nav-list-item "><a href="/mobility/Signco/0_1_input" class="nav-list-link">Input data</a></li><li class="nav-list-item "><a href="/mobility/Signco/0_3_stapvoorstap" class="nav-list-link">Stap voor stap</a></li><li class="nav-list-item "><a href="/mobility/Signco/0_4_model" class="nav-list-link">Implementatie model</a></li><li class="nav-list-item "><a href="/mobility/Signco/3_oslo_mapping" class="nav-list-link">OSLO mapping</a></li><li class="nav-list-item "><a href="/mobility/Signco/4_extended_oslo_mapping" class="nav-list-link">expanded OSLO mapping</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Telraam category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/mobility/Telraam/index" class="nav-list-link">Telraam</a><ul class="nav-list"><li class="nav-list-item "><a href="/mobility/Telraam/0_1_input" class="nav-list-link">Input data</a></li><li class="nav-list-item "><a href="/mobility/Telraam/0_3_stapvoorstap" class="nav-list-link">Stap voor stap</a></li><li class="nav-list-item "><a href="/mobility/Telraam/0_4_model" class="nav-list-link">Implementatie model</a></li><li class="nav-list-item "><a href="/mobility/Telraam/4_oslo_mapping" class="nav-list-link">OSLO mapping</a></li><li class="nav-list-item "><a href="/mobility/Telraam/5_extended_oslo_mapping" class="nav-list-link">expanded OSLO mapping</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Verkeerscentrum category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/mobility/Verkeerscentrum/index" class="nav-list-link">Verkeerscentrum</a><ul class="nav-list"><li class="nav-list-item "><a href="/mobility/Verkeerscentrum/0_1_input" class="nav-list-link">Input data</a></li><li class="nav-list-item "><a href="/mobility/Verkeerscentrum/0_3_stapvoorstap" class="nav-list-link">Stap voor stap</a></li><li class="nav-list-item "><a href="/mobility/Verkeerscentrum/0_4_model" class="nav-list-link">Implementatie model</a></li><li class="nav-list-item "><a href="/mobility/Verkeerscentrum/3_oslo_mapping" class="nav-list-link">OSLO mapping</a></li><li class="nav-list-item "><a href="/mobility/Verkeerscentrum/4_extended_oslo_mapping" class="nav-list-link">expanded OSLO mapping</a></li></ul></li></ul> <div class="nav-category">Agriculture Data Space</div> <ul class="nav-list"><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Internet of NH3 category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/milieu/Ilvo/index" class="nav-list-link">Internet of NH3</a><ul class="nav-list"></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in LUCAS category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/milieu/lucas/index" class="nav-list-link">LUCAS</a><ul class="nav-list"><li class="nav-list-item "><a href="/milieu/lucas/0_0_input" class="nav-list-link">Input data</a></li><li class="nav-list-item "><a href="/milieu/lucas/0_1_model" class="nav-list-link">OSLO model</a></li><li class="nav-list-item "><a href="/milieu/lucas/0_2_aanzet" class="nav-list-link">Aanpak</a></li><li class="nav-list-item "><a href="/milieu/lucas/3_oslo_mapping" class="nav-list-link">OSLO mapping (JSON-ld)</a></li><li class="nav-list-item "><a href="/milieu/lucas/4_extended_oslo_mapping" class="nav-list-link">Expanded OSLO mapping</a></li></ul></li></ul> <div class="nav-category">Basis Registers Data Space</div> <ul class="nav-list"><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Jachtterrein category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/basis/Jachtterrein/index" class="nav-list-link">Jachtterrein</a><ul class="nav-list"><li class="nav-list-item "><a href="/basis/Jachtterrein/1_input" class="nav-list-link">Input data</a></li><li class="nav-list-item "><a href="/basis/Jachtterrein/3_standaard" class="nav-list-link">Stap per stap</a></li><li class="nav-list-item "><a href="/basis/Jachtterrein/4_oslo_mapping" class="nav-list-link">OSLO mapping</a></li><li class="nav-list-item "><a href="/basis/Jachtterrein/5_expanded_oslo_mapping" class="nav-list-link">Expanded OSLO mapping</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Organisatieregister category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/basis/Organisatieregister/index" class="nav-list-link">Organisatieregister</a><ul class="nav-list"><li class="nav-list-item "><a href="/basis/Organisatieregister/1_input" class="nav-list-link">Input data</a></li><li class="nav-list-item "><a href="/basis/Organisatieregister/3_model" class="nav-list-link">Oslo model</a></li><li class="nav-list-item "><a href="/basis/Organisatieregister/4_oslo_mapping" class="nav-list-link">OSLO mapping</a></li><li class="nav-list-item "><a href="/basis/Organisatieregister/5_expanded_oslo_mapping" class="nav-list-link">Expanded OSLO mapping</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Verenigingsregister category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/basis/Verenigingsregister/index" class="nav-list-link">Verenigingsregister</a><ul class="nav-list"><li class="nav-list-item "><a href="/basis/Verenigingsregister/1_input" class="nav-list-link">Input data</a></li><li class="nav-list-item "><a href="/basis/Verenigingsregister/3_model" class="nav-list-link">Oslo model</a></li><li class="nav-list-item "><a href="/basis/Verenigingsregister/4_oslo_mapping" class="nav-list-link">OSLO mapping</a></li><li class="nav-list-item "><a href="/basis/Verenigingsregister/5_expanded_oslo_mapping" class="nav-list-link">Expanded OSLO mapping</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Wegenregister category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/basis/Wegenregister/index" class="nav-list-link">Wegenregister</a><ul class="nav-list"><li class="nav-list-item "><a href="/basis/Wegenregister/1_input" class="nav-list-link">Input data</a></li><li class="nav-list-item "><a href="/basis/Wegenregister/3_model" class="nav-list-link">Oslo model</a></li><li class="nav-list-item "><a href="/basis/Wegenregister/4_oslo_mapping" class="nav-list-link">OSLO mapping</a></li><li class="nav-list-item "><a href="/basis/Wegenregister/5_expanded_oslo_mapping" class="nav-list-link">Expanded OSLO mapping</a></li></ul></li></ul> </nav> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search" role="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search OSLO mapping documentatie" aria-label="Search OSLO mapping documentatie" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> </div> <div id="main-content-wrap" class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="/water/IMJV/index">IMJV</a></li> <li class="breadcrumb-nav-list-item"><span>Stap voor stap</span></li> </ol> </nav> <div id="main-content" class="main-content"> <main> <h1 id="intro"> <a href="#intro" class="anchor-heading" aria-labelledby="intro"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Intro </h1> <p>Voor het mappen van de tabulaire view naar een Linked Data graph volgens OSLO wordt gewerkt in 2 stappen.</p> <p>Eerst gebeurt een rudimentaire omzetting naar Linked Data die aansluit bij de oorspronkelijke kolomstructuur. De reden hiervoor is dat we de OSLO mapping via SPARQL Construct queries willen uitdrukken. Dit is een leesbare manier om complexe mappingen te beschrijven, maar vereist Linked Data als input.</p> <p>Daarna gebeurt een SPARQL CONSTRUCT mapping die de intiële omzetting herstructureerd in het implementatiemodel.</p> <p>Om deze stappen beter uit te leggen, gaan we een water-observatie als voorbeeld uitwerken.</p> <h1 id="voorbeeld-bruto-vracht-observatie-water"> <a href="#voorbeeld-bruto-vracht-observatie-water" class="anchor-heading" aria-labelledby="voorbeeld-bruto-vracht-observatie-water"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Voorbeeld bruto vracht observatie water </h1> <h2 id="ruwe-data"> <a href="#ruwe-data" class="anchor-heading" aria-labelledby="ruwe-data"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Ruwe data </h2> <p>Om bruto vracht observaties te publiceren hebben we maar een deel van de kolommen in de view nodig:</p> <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"observation_url"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"https:</span><span class="se">\/\/</span><span class="s2">data.imjv.omgeving.vlaanderen.be</span><span class="se">\/</span><span class="s2">id</span><span class="se">\/</span><span class="s2">observatie</span><span class="se">\/</span><span class="s2">01894963000131</span><span class="se">\/</span><span class="s2">AW9308001</span><span class="se">\/</span><span class="s2">transfer</span><span class="se">\/</span><span class="s2">chemische_stof</span><span class="se">\/</span><span class="s2">RYGMFSIKBFXOCR-UHFFFAOYSA-N</span><span class="se">\/</span><span class="s2">2021"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"observatie_label"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Observatie Koper 2021"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"year0"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">2021</span><span class="p">,</span><span class="w">
    </span><span class="nl">"emissie_url"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"https:</span><span class="se">\/\/</span><span class="s2">data.imjv.omgeving.vlaanderen.be</span><span class="se">\/</span><span class="s2">id</span><span class="se">\/</span><span class="s2">lozing</span><span class="se">\/</span><span class="s2">01894963000131</span><span class="se">\/</span><span class="s2">AW9308001</span><span class="se">\/</span><span class="s2">2021"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"substantie_url"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"https:</span><span class="se">\/\/</span><span class="s2">data.omgeving.vlaanderen.be</span><span class="se">\/</span><span class="s2">id</span><span class="se">\/</span><span class="s2">concept</span><span class="se">\/</span><span class="s2">chemische_stof</span><span class="se">\/</span><span class="s2">RYGMFSIKBFXOCR-UHFFFAOYSA-N"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"substantie_label"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Koper"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"bepalingsmethode_url"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"https:</span><span class="se">\/\/</span><span class="s2">data.imjv.omgeving.vlaanderen.be</span><span class="se">\/</span><span class="s2">id</span><span class="se">\/</span><span class="s2">concept</span><span class="se">\/</span><span class="s2">meetgegevens"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"unitMeasure_url"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"https:</span><span class="se">\/\/</span><span class="s2">data.imjv.omgeving.vlaanderen.be</span><span class="se">\/</span><span class="s2">id</span><span class="se">\/</span><span class="s2">concept</span><span class="se">\/</span><span class="s2">eenheid</span><span class="se">\/</span><span class="s2">kg_per_jaar"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"unitMeasure_label"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"kg</span><span class="se">\/</span><span class="s2">jaar"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"modifiedAt"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-06-05T07:14:44.998Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"isDeleted"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div> <p>Merk op dat kolommen <code class="language-plaintext highlighter-rouge">modifiedAt</code> en <code class="language-plaintext highlighter-rouge">isDeleted</code> ook gebruikt worden. Deze zijn domeinonafhankelijk en worden gebruikt bij het versioneren van de data.</p> <h2 id="intermediate-mapping"> <a href="#intermediate-mapping" class="anchor-heading" aria-labelledby="intermediate-mapping"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Intermediate mapping </h2> <p>Om de intermediate mapping te doen, worden volgende configuratie-velden gebruikt in de VMM-pipeline:</p> <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="na">ldes_aboutbaseurl</span><span class="pi">:</span> <span class="s2">"</span><span class="s">https://vmm.be/id/imjv/"</span>
  <span class="na">ldes_aboutcolumnname</span><span class="pi">:</span> <span class="s2">"</span><span class="s">observation_url"</span>
  <span class="na">ldes_propertybaseurl</span><span class="pi">:</span> <span class="s2">"</span><span class="s">https://vmm.be/ns#"</span>
  <span class="na">ldes_membertype</span><span class="pi">:</span> <span class="s2">"</span><span class="s">http://www.w3.org/ns/sosa/Observation"</span>
  <span class="na">ldes_timestamppath</span><span class="pi">:</span> <span class="s2">"</span><span class="s">http://www.w3.org/ns/prov#generatedAtTime"</span>
  <span class="na">ldes_versionof</span><span class="pi">:</span> <span class="s2">"</span><span class="s">http://purl.org/dc/terms/isVersionOf"</span>
</code></pre></div></div> <ul> <li><code class="language-plaintext highlighter-rouge">aboutbaseurl</code> + waarde van <code class="language-plaintext highlighter-rouge">aboutcolumnname</code> worden gebruikt om per record een URI te maken</li> <li>deze URI wordt verder geversioneerd met de huidige timestamp in de pipeline</li> <li>elke kolomwaarde leidt tot een triple met als predikaat <code class="language-plaintext highlighter-rouge">propertybaseurl</code> + naam van kolom</li> <li>een <code class="language-plaintext highlighter-rouge">rdf:type</code> triple wordt toegevoegd met als object de waarde van <code class="language-plaintext highlighter-rouge">membertype</code></li> <li>een <code class="language-plaintext highlighter-rouge">versionOf</code> triple wordt toegevoegd met predikaat op basis van <code class="language-plaintext highlighter-rouge">versionof</code></li> <li>een <code class="language-plaintext highlighter-rouge">timestamp</code> triple wordt toegevoegd met predikaat op basis van <code class="language-plaintext highlighter-rouge">timestamppath</code></li> </ul> <p>De eerste omzetting leidt tot volgende triples:</p> <div class="language-turtle highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nl">&lt;https://vmm.be/id/imjv/https%3A%2F%2Fdata.imjv.omgeving.vlaanderen.be%2Fid%2Fobservatie%2F01894963000131%2FAW9308001%2Ftransfer%2Fchemische_stof%2FRYGMFSIKBFXOCR-UHFFFAOYSA-N%2F2021/2024-06-06T07:09:38.716Z&gt;</span><span class="w"> </span><span class="nl">&lt;https://vmm.be/ns#observation_url&gt;</span><span class="w"> </span><span class="s">"https://data.imjv.omgeving.vlaanderen.be/id/observatie/01894963000131/AW9308001/transfer/chemische_stof/RYGMFSIKBFXOCR-UHFFFAOYSA-N/2021"</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="nl">&lt;https://vmm.be/id/imjv/https%3A%2F%2Fdata.imjv.omgeving.vlaanderen.be%2Fid%2Fobservatie%2F01894963000131%2FAW9308001%2Ftransfer%2Fchemische_stof%2FRYGMFSIKBFXOCR-UHFFFAOYSA-N%2F2021/2024-06-06T07:09:38.716Z&gt;</span><span class="w"> </span><span class="nl">&lt;https://vmm.be/ns#observatie_label&gt;</span><span class="w"> </span><span class="s">"Observatie Koper 2021"</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="nl">&lt;https://vmm.be/id/imjv/https%3A%2F%2Fdata.imjv.omgeving.vlaanderen.be%2Fid%2Fobservatie%2F01894963000131%2FAW9308001%2Ftransfer%2Fchemische_stof%2FRYGMFSIKBFXOCR-UHFFFAOYSA-N%2F2021/2024-06-06T07:09:38.716Z&gt;</span><span class="w"> </span><span class="nl">&lt;https://vmm.be/ns#year0&gt;</span><span class="w"> </span><span class="s">"2021"</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="nl">&lt;https://vmm.be/id/imjv/https%3A%2F%2Fdata.imjv.omgeving.vlaanderen.be%2Fid%2Fobservatie%2F01894963000131%2FAW9308001%2Ftransfer%2Fchemische_stof%2FRYGMFSIKBFXOCR-UHFFFAOYSA-N%2F2021/2024-06-06T07:09:38.716Z&gt;</span><span class="w"> </span><span class="nl">&lt;https://vmm.be/ns#emissie_url&gt;</span><span class="w"> </span><span class="s">"https://data.imjv.omgeving.vlaanderen.be/id/lozing/01894963000131/AW9308001/2021"</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="nl">&lt;https://vmm.be/id/imjv/https%3A%2F%2Fdata.imjv.omgeving.vlaanderen.be%2Fid%2Fobservatie%2F01894963000131%2FAW9308001%2Ftransfer%2Fchemische_stof%2FRYGMFSIKBFXOCR-UHFFFAOYSA-N%2F2021/2024-06-06T07:09:38.716Z&gt;</span><span class="w"> </span><span class="nl">&lt;https://vmm.be/ns#substantie_url&gt;</span><span class="w"> </span><span class="s">"https://data.omgeving.vlaanderen.be/id/concept/chemische_stof/RYGMFSIKBFXOCR-UHFFFAOYSA-N"</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="nl">&lt;https://vmm.be/id/imjv/https%3A%2F%2Fdata.imjv.omgeving.vlaanderen.be%2Fid%2Fobservatie%2F01894963000131%2FAW9308001%2Ftransfer%2Fchemische_stof%2FRYGMFSIKBFXOCR-UHFFFAOYSA-N%2F2021/2024-06-06T07:09:38.716Z&gt;</span><span class="w"> </span><span class="nl">&lt;https://vmm.be/ns#substantie_label&gt;</span><span class="w"> </span><span class="s">"Koper"</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="nl">&lt;https://vmm.be/id/imjv/https%3A%2F%2Fdata.imjv.omgeving.vlaanderen.be%2Fid%2Fobservatie%2F01894963000131%2FAW9308001%2Ftransfer%2Fchemische_stof%2FRYGMFSIKBFXOCR-UHFFFAOYSA-N%2F2021/2024-06-06T07:09:38.716Z&gt;</span><span class="w"> </span><span class="nl">&lt;https://vmm.be/ns#bepalingsmethode_url&gt;</span><span class="w"> </span><span class="s">"https://data.imjv.omgeving.vlaanderen.be/id/concept/meetgegevens"</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="nl">&lt;https://vmm.be/id/imjv/https%3A%2F%2Fdata.imjv.omgeving.vlaanderen.be%2Fid%2Fobservatie%2F01894963000131%2FAW9308001%2Ftransfer%2Fchemische_stof%2FRYGMFSIKBFXOCR-UHFFFAOYSA-N%2F2021/2024-06-06T07:09:38.716Z&gt;</span><span class="w"> </span><span class="nl">&lt;https://vmm.be/ns#bepalingsmethode_label&gt;</span><span class="w"> </span><span class="s">"meetgegevens"</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="nl">&lt;https://vmm.be/id/imjv/https%3A%2F%2Fdata.imjv.omgeving.vlaanderen.be%2Fid%2Fobservatie%2F01894963000131%2FAW9308001%2Ftransfer%2Fchemische_stof%2FRYGMFSIKBFXOCR-UHFFFAOYSA-N%2F2021/2024-06-06T07:09:38.716Z&gt;</span><span class="w"> </span><span class="nl">&lt;https://vmm.be/ns#value0&gt;</span><span class="w"> </span><span class="s">"1.44642"</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="nl">&lt;https://vmm.be/id/imjv/https%3A%2F%2Fdata.imjv.omgeving.vlaanderen.be%2Fid%2Fobservatie%2F01894963000131%2FAW9308001%2Ftransfer%2Fchemische_stof%2FRYGMFSIKBFXOCR-UHFFFAOYSA-N%2F2021/2024-06-06T07:09:38.716Z&gt;</span><span class="w"> </span><span class="nl">&lt;https://vmm.be/ns#unitMeasure_url&gt;</span><span class="w"> </span><span class="s">"https://data.imjv.omgeving.vlaanderen.be/id/concept/eenheid/kg_per_jaar"</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="nl">&lt;https://vmm.be/id/imjv/https%3A%2F%2Fdata.imjv.omgeving.vlaanderen.be%2Fid%2Fobservatie%2F01894963000131%2FAW9308001%2Ftransfer%2Fchemische_stof%2FRYGMFSIKBFXOCR-UHFFFAOYSA-N%2F2021/2024-06-06T07:09:38.716Z&gt;</span><span class="w"> </span><span class="nl">&lt;https://vmm.be/ns#unitMeasure_label&gt;</span><span class="w"> </span><span class="s">"kg/jaar"</span><span class="w"> </span><span class="p">.</span><span class="w">

</span><span class="nl">&lt;https://vmm.be/id/imjv/https%3A%2F%2Fdata.imjv.omgeving.vlaanderen.be%2Fid%2Fobservatie%2F01894963000131%2FAW9308001%2Ftransfer%2Fchemische_stof%2FRYGMFSIKBFXOCR-UHFFFAOYSA-N%2F2021/2024-06-06T07:09:38.716Z&gt;</span><span class="w"> </span><span class="nl">&lt;https://vmm.be/ns#modifiedAt&gt;</span><span class="w"> </span><span class="s">"2024-06-05T07:14:44.998Z"</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="nl">&lt;https://vmm.be/id/imjv/https%3A%2F%2Fdata.imjv.omgeving.vlaanderen.be%2Fid%2Fobservatie%2F01894963000131%2FAW9308001%2Ftransfer%2Fchemische_stof%2FRYGMFSIKBFXOCR-UHFFFAOYSA-N%2F2021/2024-06-06T07:09:38.716Z&gt;</span><span class="w"> </span><span class="nl">&lt;#isDeleted&gt;</span><span class="w"> </span><span class="s">"0"</span><span class="w"> </span><span class="p">.</span><span class="w">

</span><span class="nl">&lt;https://vmm.be/id/imjv/https%3A%2F%2Fdata.imjv.omgeving.vlaanderen.be%2Fid%2Fobservatie%2F01894963000131%2FAW9308001%2Ftransfer%2Fchemische_stof%2FRYGMFSIKBFXOCR-UHFFFAOYSA-N%2F2021/2024-06-06T07:09:38.716Z&gt;</span><span class="w"> </span><span class="nl">&lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#type&gt;</span><span class="w"> </span><span class="nl">&lt;http://www.w3.org/ns/sosa/Observation&gt;</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="nl">&lt;https://vmm.be/id/imjv/https%3A%2F%2Fdata.imjv.omgeving.vlaanderen.be%2Fid%2Fobservatie%2F01894963000131%2FAW9308001%2Ftransfer%2Fchemische_stof%2FRYGMFSIKBFXOCR-UHFFFAOYSA-N%2F2021/2024-06-06T07:09:38.716Z&gt;</span><span class="w"> </span><span class="nl">&lt;http://www.w3.org/ns/prov#generatedAtTime&gt;</span><span class="w"> </span><span class="s">"2024-06-06T07:09:38.716Z"</span><span class="p">^^</span><span class="nl">&lt;http://www.w3.org/2001/XMLSchema#dateTime&gt;</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="nl">&lt;https://vmm.be/id/imjv/https%3A%2F%2Fdata.imjv.omgeving.vlaanderen.be%2Fid%2Fobservatie%2F01894963000131%2FAW9308001%2Ftransfer%2Fchemische_stof%2FRYGMFSIKBFXOCR-UHFFFAOYSA-N%2F2021/2024-06-06T07:09:38.716Z&gt;</span><span class="w"> </span><span class="nl">&lt;http://purl.org/dc/terms/isVersionOf&gt;</span><span class="w"> </span><span class="nl">&lt;https://vmm.be/id/imjv/https%3A%2F%2Fdata.imjv.omgeving.vlaanderen.be%2Fid%2Fobservatie%2F01894963000131%2FAW9308001%2Ftransfer%2Fchemische_stof%2FRYGMFSIKBFXOCR-UHFFFAOYSA-N%2F2021&gt;</span><span class="w"> </span><span class="p">.</span><span class="w">
</span></code></pre></div></div> <h2 id="oslo-mapping"> <a href="#oslo-mapping" class="anchor-heading" aria-labelledby="oslo-mapping"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> OSLO mapping </h2> <p>Op basis van de intermediate omzetting kan vervolgens een OSLO mapping uitwerkt worden adhv SPARQL CONSTRUCT queries. De intermediate omzetting kan lokaal gehost worden via HTTP server om vervolgens met Comunica te transformeren.</p> <h3 id="where"> <a href="#where" class="anchor-heading" aria-labelledby="where"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> WHERE </h3> <p>Bovenstaande triples worden gebruikt als input in de WHERE-clausule:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>CONSTRUCT {
  ...
} WHERE {
  ?obs rdf:type ?type ;
      prov:generatedAtTime ?gat ;
      dcterms:isVersionOf ?ivo .
    ?obs &lt;https://vmm.be/ns#observation_url&gt; ?observation_url .
    ?obs &lt;https://vmm.be/ns#observatie_label&gt; ?observatie_label .
    ?obs &lt;https://vmm.be/ns#value0&gt; ?value0 .
    ?obs &lt;https://vmm.be/ns#year0&gt; ?year0 .
    ?obs &lt;https://vmm.be/ns#substantie_url&gt; ?substantie_url .
    ?obs &lt;https://vmm.be/ns#emissie_url&gt; ?emissie_url .
    ?obs &lt;https://vmm.be/ns#substantie_label&gt; ?substantie_label .
    ?obs &lt;https://vmm.be/ns#bepalingsmethode_url&gt; ?bepalingsmethode_url .
    ?obs &lt;https://vmm.be/ns#modifiedAt&gt; ?modifiedAt .
    OPTIONAL {
      ?obs &lt;https://vmm.be/ns#unitMeasure_url&gt; ?unitMeasure_url .
      ?obs &lt;https://vmm.be/ns#unitMeasure_label&gt; ?unitMeasure_label .
    }
}
</code></pre></div></div> <p>De bovenste drie triple “patterns” werden automatisch toegevoegd zoals hierboven vermeld op basis van configuratie van de pipeline. Deze gebruiken wij niet, omdat we gebruiken maken van de modifiedAt om een versie object te maken.</p> <p>Merk op dat unitMeasure_url en unitMeasure_label op OPTIONAL staan, omdat dit leeg (NULL) kan zijn in de view .</p> <h3 id="prefix"> <a href="#prefix" class="anchor-heading" aria-labelledby="prefix"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Prefix </h3> <p>Voor de leesbaarheid worden volgende prefices gebruikt:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>PREFIX dcterms: &lt;http://purl.org/dc/terms/&gt;
PREFIX dc: &lt;http://purl.org/dc/elements/1.1/&gt;
PREFIX skos: &lt;http://www.w3.org/2004/02/skos/core#&gt;
PREFIX rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;
PREFIX csvw: &lt;http://www.w3.org/ns/csvw#&gt;
PREFIX vmm: &lt;https://vmm.be/ns#&gt;
PREFIX prov: &lt;http://www.w3.org/ns/prov#&gt;
PREFIX rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#&gt;
PREFIX sosa: &lt;http://www.w3.org/ns/sosa/&gt;
PREFIX ssn: &lt;http://www.w3.org/ns/ssn/&gt;
PREFIX xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt;
PREFIX time: &lt;http://www.w3.org/2006/time#&gt;
PREFIX schema: &lt;https://schema.org/&gt;
PREFIX imjv: &lt;https://data.imjv.omgeving.vlaanderen.be/ns/imjv#&gt;
PREFIX locn: &lt;http://www.w3.org/ns/locn#&gt;
PREFIX geosparql: &lt;http://www.opengis.net/ont/geosparql#&gt;
PREFIX wk: &lt;https://data.vlaanderen.be/ns/waterkwaliteit#&gt;
</code></pre></div></div> <h3 id="construct"> <a href="#construct" class="anchor-heading" aria-labelledby="construct"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> CONSTRUCT </h3> <h4 id="versie"> <a href="#versie" class="anchor-heading" aria-labelledby="versie"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Versie </h4> <p>Nu kunnen we starten met het mappen naar OSLO. Eerst zorgen we ervoor dat de observatie correct geversioneerd en gelabeled is. De ?observation_url kolom wordt als persistente identificator van een observatie gebruikt en dus niet de ?obs die door de pipeline wordt ingevuld. De bedoeling is om de Linked Data zo dicht mogelijk in de bron te houden. Dit houdt in dat de URI’s van resources best worden beschreven in de view adhv <code class="language-plaintext highlighter-rouge">_url</code> kolommen en niet in de mapping. Het versioneren wordt hier wel in de mapping gedaan adhv de modifiedAt-waarde om te vermijden dat het aantal _url kolommen verdubbelt.</p> <p>Belangrijk bij het mappen is dat de objecten van triples correct getypeerd worden: datatypes worden verrijkt met <code class="language-plaintext highlighter-rouge">STRDT</code> en bijhorende xsd type, instanties van een klasse met <code class="language-plaintext highlighter-rouge">URI</code>.</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>CONSTRUCT {
  # EmissieVrachtAgens observaties voor water
  ?observation_versie rdf:type ?type ;
    prov:generatedAtTime ?modifiedAt_with_datatype ;
    dcterms:isVersionOf ?observation ;
    rdfs:label ?observatie_vracht_label .
    ...
} WHERE {
  BIND(STRDT(?modifiedAt, xsd:dateTime) as ?modifiedAt_with_datatype)
  BIND(URI(?observation_url) as ?observation)
  BIND(URI(concat(str(?observation_url), "/", str(?modifiedAt_with_datatype))) as ?observation_versie)
  BIND(concat('Geobserveerde vracht ', ?observatie_label) as ?observatie_vracht_label)

  ...
}
</code></pre></div></div> <h4 id="resultaat-en-tijd"> <a href="#resultaat-en-tijd" class="anchor-heading" aria-labelledby="resultaat-en-tijd"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Resultaat en tijd </h4> <p><img src="image-3.png" alt="alt text" /></p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>CONSTRUCT {
  ...
  ?observation_versie sosa:phenomenonTime ?observation_versie_fenomeentijd ;
    sosa:hasResult ?observation_versie_result ;
    sosa:hasSimpleResult ?vracht_value_with_datatype .

  ?observation_versie_fenomeentijd a time:Instant ;
    rdfs:label ?year0 ;
    time:inXSDgYear ?year_with_datatype .

  ?observation_versie_result a schema:QuantitativeValue, sosa:Result ;
    schema:unitCode ?vracht_unitMeasure ;
    schema:unitText ?unitMeasure_label ;
    schema:value ?vracht_value_with_datatype ;
    rdfs:label ?vracht_value_label .
    ...
} WHERE {
    ...

    BIND('https://data.imjv.omgeving.vlaanderen.be/id/.well-known/genid/' as ?skolemBase)

    BIND(URI(concat(?skolemBase, md5(concat(str(?observation_versie), "/fenomeentijd/0001")))) as ?observation_versie_fenomeentijd) 
    BIND(URI(concat(?skolemBase, md5(concat(str(?observation_versie), "/result/0001")))) as ?observation_versie_result)

    BIND(STRDT(?year0, xsd:gYear) as ?year_with_datatype)
    BIND(URI(?unitMeasure_url) as ?vracht_unitMeasure)
    BIND(STRDT(?value0, xsd:decimal) as ?vracht_value_with_datatype)

    BIND(if(bound(?unitMeasure_label), concat(?value0, ' (', ?unitMeasure_label, ')'), concat(?value0, ' (eenheid onbekend)')) as ?vracht_value_label)
  ...
}
</code></pre></div></div> <h4 id="kenmerken"> <a href="#kenmerken" class="anchor-heading" aria-labelledby="kenmerken"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Kenmerken </h4> <p><img src="image-4.png" alt="alt text" /></p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>CONSTRUCT {
  ...
  ?observation_versie sosa:observedProperty ?observed_property_emissievrachtagens .

  ?observed_property_emissievrachtagens a sosa:ObservableProperty , imjv:EmissieVrachtAgens ;
              wk:agens ?agens ;
              rdfs:label ?observed_property_emissievrachtagens_label ;
              rdfs:comment ?observed_property_emissievrachtagens_comment .
            
            ?agens a skos:Concept ;
              rdfs:label ?substantie_url_with_lang .
    ...
} WHERE {
    ...
    BIND(URI(str(?substantie_url)) as ?agens)
    BIND(STRLANG(?substantie_url, "nl") as ?substantie_url_with_lang)

    BIND(URI(concat(?skolemBase, md5(concat(str(?observation_versie), "/kenmerktype/emissievrachtagens/0001")))) as ?observed_property_emissievrachtagens)

    BIND(STRLANG(concat("vracht ", ?substantie_label), "nl") as ?observed_property_emissievrachtagens_label)
    BIND(STRLANG(concat("De vracht ", ?substantie_label, " van een emissie."), "nl") as ?observed_property_emissievrachtagens_comment)
  ...
}
</code></pre></div></div> <h4 id="geobserveerd-object"> <a href="#geobserveerd-object" class="anchor-heading" aria-labelledby="geobserveerd-object"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Geobserveerd Object </h4> <p><img src="image-5.png" alt="alt text" /></p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>CONSTRUCT {
  ...
  ?observation_versie sosa:hasFeatureOfInterest ?emissie .
    ...
} WHERE {
  ...
  BIND(URI(?emissie_url) as ?emissie)
  ...
}
</code></pre></div></div> </main> <hr> <footer> <p class="text-small text-grey-dk-100 mb-0"></p> <div class="d-flex mt-2"> </div> </footer> </div> </div> <div class="search-overlay"></div> </div> <script src="https://cdn.jsdelivr.net/npm/mermaid@9.1.3/dist/mermaid.min.js"></script> <script> var config = {} ; mermaid.initialize(config); window.mermaid.init(undefined, document.querySelectorAll('.language-mermaid')); </script> </body> </html>
